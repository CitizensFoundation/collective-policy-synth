# CreateSolutionsProcessor

This class extends `BaseProlemSolvingAgent` to create innovative solution components for problems and associated sub-problems. It utilizes various contexts such as General, Scientific, Open Data, and News to inspire the creation of solutions. The class also refines previously generated solutions and ensures the solutions are simple, actionable, innovative, and equitable.

## Properties

| Name               | Type                  | Description                                                                 |
|--------------------|-----------------------|-----------------------------------------------------------------------------|
| webPageVectorStore | WebPageVectorStore    | An instance of `WebPageVectorStore` used for searching web pages.           |

## Methods

| Name                        | Parameters                                                                                                                                                                                                 | Return Type                    | Description                                                                                                           |
|-----------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| renderRefinePrompt          | results: IEngineSolution[], generalTextContext: string, scientificTextContext: string, openDataTextContext: string, newsTextContext: string, subProblemIndex: number, alreadyCreatedSolutions: string \| undefined | Promise<SystemMessage[] \| HumanMessage[]> | Generates messages for refining solution components based on various contexts and previously created solutions.      |
| renderCreateSystemMessage   | -                                                                                                                                                                                                          | SystemMessage                  | Creates a system message with instructions for creating innovative solution components.                               |
| renderCreateForTestTokens   | subProblemIndex: number, alreadyCreatedSolutions: string \| undefined                                                                                                                                      | HumanMessage[]                 | Generates messages for testing token counts based on sub-problem index and already created solutions.                 |
| renderCreatePrompt          | generalTextContext: string, scientificTextContext: string, openDataTextContext: string, newsTextContext: string, subProblemIndex: number, alreadyCreatedSolutions: string \| undefined                      | Promise<HumanMessage[]>        | Prepares messages for creating solution components based on various contexts and sub-problem index.                   |
| createSolutions             | subProblemIndex: number, generalTextContext: string, scientificTextContext: string, openDataTextContext: string, newsTextContext: string, alreadyCreatedSolutions: string \| undefined, stageName: PsMemoryStageTypes | Promise<IEngineSolution[]>     | Creates solution components based on provided contexts and sub-problem index, optionally refining them.                |
| randomSearchQueryIndex      | searchQueries: IEngineSearchQueries, type: IEngineWebPageTypes                                                                                                                                              | number                         | Selects a random search query index based on the type of web page.                                                    |
| getAllTypeQueries           | searchQueries: IEngineSearchQueries, subProblemIndex: number \| undefined                                                                                                                                   | { general: string, scientific: string, openData: string, news: string } | Retrieves all types of search queries for a given sub-problem index.                                                  |
| getRandomSearchQueryForType | type: IEngineWebPageTypes, problemStatementQueries: IEngineSearchQuery, subProblemQueries: IEngineSearchQuery, otherSubProblemQueries: IEngineSearchQuery, randomEntitySearchQueries: IEngineSearchQuery | string                         | Selects a random search query for a given type based on various probabilities.                                        |
| getSearchQueries            | subProblemIndex: number                                                                                                                                                                                     | { scientific: string, general: string, openData: string, news: string } | Retrieves search queries for a sub-problem index.                                                                     |
| getTextContext              | subProblemIndex: number, alreadyCreatedSolutions: string \| undefined                                                                                                                                       | Promise<{ general: string, scientific: string, openData: string, news: string }> | Gets the text context for a sub-problem index based on search queries.                                                |
| getWeightedRandomSolution   | array: T[]                                                                                                                                                                                                  | T \| ""                        | Selects a random solution from an array based on predefined weights.                                                  |
| countTokensForString        | text: string                                                                                                                                                                                                | Promise<number>                | Counts the number of tokens in a given text string.                                                                   |
| getRandomItemFromArray      | array: T[], useTopN: number \| undefined                                                                                                                                                                    | T \| ""                        | Selects a random item from an array, optionally considering only the top N items.                                     |
| renderRawSearchResults      | rawSearchResults: IEngineWebPageGraphQlResults                                                                                                                                                              | { searchResults: string, selectedUrl: string } | Renders search results from raw search data.                                                                          |
| searchForType               | subProblemIndex: number, type: IEngineWebPageTypes, searchQuery: string, tokensLeftForType: number                                                                                                          | Promise<{ searchResults: string, selectedUrl: string }> | Searches for relevant information of a specific type based on a search query.                                         |
| getSearchQueryTextContext   | subProblemIndex: number, searchQuery: string, type: IEngineWebPageTypes, alreadyCreatedSolutions: string \| undefined                                                                                       | Promise<{ searchResults: string, selectedUrl: string }> | Retrieves the text context for a search query of a specific type.                                                     |
| createAllSeedSolutions      | -                                                                                                                                                                                                          | Promise<void>                  | Creates all seed solutions for sub-problems within defined limits.                                                    |
| process                     | -                                                                                                                                                                                                          | Promise<void>                  | Main process method to initiate the creation of seed solution components.                                             |

## Example

```typescript
import { CreateSolutionsProcessor } from '@policysynth/agents/solutions/create/createSolutions.js';

// Example usage to create solutions
const createSolutionsProcessor = new CreateSolutionsProcessor();
createSolutionsProcessor.process().then(() => {
  console.log('Seed solution components created successfully.');
}).catch(error => {
  console.error('Error creating seed solution components:', error);
});
```