{"version":3,"file":"yp-collection-header.js","sourceRoot":"","sources":["../../../../src/@yrpri/yp-collection/yp-collection-header.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\nimport { YpAccessHelpers } from '../common/YpAccessHelpers.js';\nimport { YpMediaHelpers } from '../common/YpMediaHelpers.js';\nimport { ShadowStyles } from '../common/ShadowStyles.js';\nimport { MdMenu } from '@material/web/menu/menu.js';\nimport { YpCollectionHelpers } from '../common/YpCollectionHelpers.js';\n\nimport '../common/yp-image.js';\nimport '@material/web/iconbutton/outlined-icon-button.js';\nimport '@material/web/menu/menu.js';\nimport '@material/web/menu/menu-item.js';\n\nimport '../yp-magic-text/yp-magic-text.js';\nimport './yp-collection-stats.js';\n\n@customElement('yp-collection-header')\nexport class YpCollectionHeader extends YpBaseElement {\n  @property({ type: Object })\n  collection: YpCollectionData | undefined;\n\n  @property({ type: String })\n  collectionType: string | undefined;\n\n  @property({ type: Boolean })\n  hideImage = false;\n\n  @property({ type: Number })\n  flaggedContentCount: number | undefined;\n\n  @property({ type: Number })\n  collectionVideoId: number | undefined;\n\n  @property({ type: String })\n  welcomeHTML: string | undefined;\n\n  playStartedAt: Date | undefined;\n  videoPlayListener: Function | undefined;\n  videoPauseListener: Function | undefined;\n  videoEndedListener: Function | undefined;\n  audioPlayListener: Function | undefined;\n  audioPauseListener: Function | undefined;\n  audioEndedListener: Function | undefined;\n\n  get hasCollectionAccess(): boolean {\n    switch (this.collectionType) {\n      case 'domain':\n        return YpAccessHelpers.checkDomainAccess(\n          this.collection as YpDomainData\n        );\n      case 'community':\n        return YpAccessHelpers.checkCommunityAccess(\n          this.collection as YpCommunityData\n        );\n      case 'group':\n        return YpAccessHelpers.checkGroupAccess(this.collection as YpGroupData);\n      default:\n        return false;\n    }\n  }\n\n  get collectionVideos(): Array<YpVideoData> | undefined {\n    switch (this.collectionType) {\n      case 'domain':\n        return (this.collection as YpDomainData).DomainLogoVideos;\n      case 'community':\n        return (this.collection as YpCommunityData).CommunityLogoVideos;\n      case 'group':\n        return (this.collection as YpGroupData).GroupLogoVideos;\n    }\n  }\n\n  get openMenuLabel(): string {\n    switch (this.collectionType) {\n      case 'domain':\n        return this.t('openDomainMenu');\n      case 'community':\n        return this.t('openCommunityMenu');\n      case 'group':\n        return this.t('openGroupMenu');\n      default:\n        return 'Open menu';\n    }\n  }\n\n  get collectionHeaderImages(): Array<YpImageData> | undefined {\n    switch (this.collectionType) {\n      case 'domain':\n        return (this.collection as YpDomainData).DomainHeaderImages;\n      case 'community':\n        return (this.collection as YpCommunityData).CommunityHeaderImages;\n      case 'group':\n        return (this.collection as YpGroupData).GroupHeaderImages;\n    }\n  }\n\n  get collectionVideoURL(): string | undefined {\n    if (\n      this.collection &&\n      this.collection.configuration &&\n      this.collection.configuration.useVideoCover\n    ) {\n      const collectionVideos = this.collectionVideos;\n      if (collectionVideos) {\n        const videoURL = YpMediaHelpers.getVideoURL(collectionVideos);\n        if (videoURL) {\n          this.collectionVideoId = collectionVideos[0].id;\n          return videoURL;\n        } else {\n          return undefined;\n        }\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  get collectionVideoPosterURL(): string | undefined {\n    if (\n      this.collection &&\n      this.collection.configuration &&\n      this.collection.configuration.useVideoCover\n    ) {\n      const videoPosterURL = YpMediaHelpers.getVideoPosterURL(\n        this.collectionVideos,\n        YpCollectionHelpers.logoImages(this.collectionType, this.collection)\n      );\n      if (videoPosterURL) {\n        return videoPosterURL;\n      } else {\n        return undefined;\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  get collectionHeaderImagePath(): string | undefined {\n    return YpMediaHelpers.getImageFormatUrl(this.collectionHeaderImages, 0);\n  }\n\n  // UI\n\n  static get styles() {\n    return [\n      super.styles,\n      ShadowStyles,\n      css`\n        .stats {\n          position: absolute;\n          bottom: 0;\n          right: 8px;\n        }\n\n        .collection-name {\n          font-size: var(--mdc-typography-headline1-font-size);\n          font-weight: var(--mdc-typography-headline1-font-weight);\n          background-color: var(--mdc-theme-primary);\n          color: var(--mdc-theme-on-primary);\n          padding: 16px;\n        }\n\n        .collection-name[widetext] {\n          font-size: var(--mdc-typography-headline1-widetext-font-size, 20px);\n        }\n\n        .collection-name[largeFont] {\n          font-size: var(--mdc-typography-headline1-widetext-font-size, 20px);\n        }\n\n        .large-card {\n          color: var(--mdc-theme-on-surface);\n          background-color: var(--mdc-theme-surface);\n          height: 243px;\n          width: 432px;\n          padding: 0 !important;\n          margin-top: 0 !important;\n        }\n\n        .image,\n        video {\n          width: 432px;\n          height: 243px;\n        }\n\n        #menuButton {\n          color: var(--mdc-theme-on-primary);\n          background-color: var(--mdc-theme-primary);\n          position: absolute;\n          top: 0;\n          right: 0;\n        }\n\n        .textBox {\n          margin-left: 32px;\n          position: relative;\n        }\n\n        .description {\n          padding: 16px;\n          vertical-align: middle;\n          font-size: 15px;\n        }\n\n        .description[widetext] {\n          font-size: 14px;\n        }\n\n        #welcomeHTML {\n          width: 432px;\n          max-width: 432px;\n          overflow: hidden;\n        }\n\n        :host {\n          margin-top: 32px;\n          margin-bottom: 32px;\n        }\n\n        @media (max-width: 960px) {\n          :host {\n            max-width: 423px;\n            padding: 0 !important;\n            padding-top: 8px !important;\n            width: 100%;\n          }\n\n          #welcomeHTML {\n            width: 306px;\n            max-width: 306px;\n          }\n\n          .large-card {\n            width: 100%;\n            height: 100%;\n            margin-left: 8px;\n            margin-right: 8px;\n            margin-top: 8px !important;\n          }\n\n          .top-card {\n            margin-bottom: 16px;\n          }\n\n          yp-image,\n          video,\n          .image {\n            width: 100%;\n            height: 230px;\n          }\n\n          .imageCard {\n            height: 230px;\n          }\n\n          .imageCard[is-video] {\n            background-color: transparent;\n          }\n\n          .collection-name {\n            font-size: 22px;\n            padding-bottom: 9px;\n            min-height: 28px;\n          }\n\n          .description {\n            padding-bottom: 42px;\n          }\n\n          .textBox {\n            margin-left: 8px;\n          }\n        }\n\n        @media (max-width: 375px) {\n          yp-image,\n          video,\n          .image {\n            height: 225px;\n          }\n\n          .imageCard {\n            height: 225px;\n          }\n        }\n\n        @media (max-width: 375px) {\n          yp-image,\n          video,\n          .image {\n            height: 207px;\n          }\n\n          .imageCard {\n            height: 205px;\n          }\n        }\n\n        @media (max-width: 360px) {\n          yp-image,\n          video,\n          .image {\n            height: 200px;\n          }\n\n          .imageCard {\n            height: 200px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          yp-image,\n          video,\n          .image {\n            height: 180px;\n          }\n\n          .imageCard {\n            height: 180px;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        a {\n          text-decoration: none;\n          color: inherit;\n        }\n      `,\n    ];\n  }\n\n  renderStats() {\n    switch (this.collectionType) {\n      case 'domain':\n        return html``;\n      case 'community':\n        return html``;\n      case 'group':\n        return html``;\n      default:\n        return nothing;\n    }\n  }\n\n  renderFirstBoxContent() {\n    if (this.collection?.configuration?.welcomeHTML) {\n      return html`<div id=\"welcomeHTML\">\n        ${unsafeHTML(this.collection.configuration.welcomeHTML)}\n      </div>`;\n    } else if (this.collectionVideoURL) {\n      return html`\n        <video\n          id=\"videoPlayer\"\n          data-id=\"${ifDefined(this.collectionVideoId)}\"\n          controls\n          preload=\"metadata\"\n          class=\"image\"\n          src=\"${this.collectionVideoURL}\"\n          playsinline\n          poster=\"${ifDefined(this.collectionVideoPosterURL)}\"\n        ></video>\n      `;\n    } else if (this.collection) {\n      return html`\n        <yp-image\n          class=\"image\"\n          ?hidden=\"${this.hideImage}\"\n          .alt=\"${this.collection.name}\"\n          sizing=\"cover\"\n          .src=\"${YpCollectionHelpers.logoImagePath(\n            this.collectionType,\n            this.collection\n          )}\"\n        ></yp-image>\n      `;\n    } else {\n      return nothing;\n    }\n  }\n\n  _openMenu() {\n    (this.$$('#menu') as MdMenu).open = true;\n    this.requestUpdate();\n  }\n\n  renderMenu() {\n    return html`\n      <div>\n        <md-outlined-icon-button\n          id=\"menuButton\"\n          icon=\"more_vert\"\n          @click=\"${this._openMenu}\"\n          title=\"${this.openMenuLabel}\"\n        >\n        </md-outlined-icon-button>\n        <md-menu id=\"adminMenu\" @changed=\"${this._menuSelection}\">\n          <md-menu-item id=\"openAdminApp\"\n            >${this.t('openAdministration')}</md-menu-item\n          >\n          <md-menu-item id=\"openAnalyticsApp\"\n            >${this.t('openAnalyticsApp')}</md-menu-item\n          >\n        </md-menu>\n      </div>\n    `;\n  }\n\n  renderFooter() {\n    return html`\n      <div class=\"stats layout horizontal\">\n        <yp-collection-stats\n          .collectionType=\"${this.collectionType}\"\n          .collection=\"${this.collection}\"\n        ></yp-collection-stats>\n      </div>\n    `;\n  }\n\n  render() {\n    return html`\n      ${this.collection\n        ? html`\n            <div class=\"layout horizontal wrap\">\n              <div\n                is-video=\"${ifDefined(this.collectionVideoURL)}\"\n                id=\"cardImage\"\n                class=\"large-card imageCard top-card shadow-elevation-8dp shadow-transition\"\n              >\n                ${this.renderFirstBoxContent()}\n              </div>\n              <div\n                id=\"card\"\n                class=\"large-card textBox shadow-elevation-8dp shadow-transition layout horizontal\"\n              >\n                <div class=\"layout vertical\">\n                  <div class=\"descriptionContainer\">\n                    <div>\n                      <yp-magic-text\n                        class=\"collection-name\"\n                        role=\"heading\"\n                        aria-level=\"1\"\n                        ?largeFont=\"${this.largeFont}\"\n                        aria-label=\"${this.collection.name}\"\n                        .textType=\"${YpCollectionHelpers.nameTextType(\n                          this.collectionType\n                        )}\"\n                        .contentLanguage=\"${this.collection.language}\"\n                        ?disableTranslation=\"${this.collection.configuration\n                          ?.disableNameAutoTranslation}\"\n                        textOnly\n                        .content=\"${this.collection.name}\"\n                        .contentId=\"${this.collection.id}\"\n                      >\n                      </yp-magic-text>\n                      <yp-magic-text\n                        id=\"description\"\n                        class=\"description collectionDescription\"\n                        .textType=\"${YpCollectionHelpers.descriptionTextType(\n                          this.collectionType\n                        )}\"\n                        ?largeFont=\"${this.largeFont}\"\n                        .contentLanguage=\"${this.collection.language}\"\n                        truncate=\"150\"\n                        .content=\"${this.collection.description ||\n                        this.collection.objectives}\"\n                        .contentId=\"${this.collection.id}\"\n                      >\n                      </yp-magic-text>\n                    </div>\n                  </div>\n\n                  ${this.hasCollectionAccess ? this.renderMenu() : nothing}\n                  ${this.renderFooter()}\n                </div>\n              </div>\n            </div>\n          `\n        : html``}\n    `;\n  }\n\n  // EVENTS\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addGlobalListener(\n      'yp-got-admin-rights',\n      this.requestUpdate.bind(this)\n    );\n    this.addGlobalListener(\n      'yp-pause-media-playback',\n      this._pauseMediaPlayback.bind(this)\n    );\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener('yp-got-admin-rights', this.requestUpdate);\n    this.removeGlobalListener(\n      'yp-pause-media-playback',\n      this._pauseMediaPlayback\n    );\n    YpMediaHelpers.detachMediaListeners(this as unknown as YpElementWithPlayback); //TODO: Remove unknown cast\n  }\n\n  firstUpdated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.firstUpdated(changedProperties);\n    YpMediaHelpers.attachMediaListeners(this as unknown as YpElementWithPlayback); //TODO: Remove unknown cast\n  }\n\n  updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    // TODO: Test this well is it working as expected\n    if (changedProperties.has('collection')) {\n      YpMediaHelpers.detachMediaListeners(this as unknown as YpElementWithPlayback); //TODO: Remove unknown cast\n    }\n\n    if (this.collection) {\n      YpMediaHelpers.attachMediaListeners(this as unknown as YpElementWithPlayback); //TODO: Remove unknown cast\n    }\n  }\n\n  _pauseMediaPlayback() {\n    YpMediaHelpers.pauseMediaPlayback(this as unknown as YpElementWithPlayback); //TODO: Remove unknown cast\n  }\n\n  _menuSelection(event: CustomEvent) {\n    if (this.collection) {\n      if (event.detail.item.id === 'editMenuItem')\n        window.location.href = `/admin/${this.collectionType}/${this.collection.id}`;\n      else if (event.detail.item.id === 'openAnalyticsApp')\n        window.location.href = `/analytics/${this.collectionType}/${this.collection.id}`;\n      (this.$$('#adminMenu') as MdMenu).close();\n    }\n  }\n}\n"]}