{"version":3,"file":"yp-language-selector.js","sourceRoot":"","sources":["../../../../src/@yrpri/yp-app/yp-language-selector.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\n\n//import '@material/mwc-dialog';\n//import '@material/md-outlined-button';\n//import '@material/mwc-select';\n//import '@material/mwc-list/mwc-list-item';\n\n@customElement('yp-language-selector')\nexport class YpLanguageSelector extends YpBaseElement {\n  @property({ type: Boolean })\n  refreshLanguages = false;\n\n  @property({ type: Boolean })\n  noUserEvents = false;\n\n  @property({ type: String })\n  selectedLocale: string | undefined;\n\n  @property({ type: String })\n  value = '';\n\n  @property({ type: String })\n  name = '';\n\n  @property({ type: Boolean })\n  autoTranslateOptionDisabled = false;\n\n  @property({ type: Boolean })\n  autoTranslate = false;\n\n  @property({ type: Boolean })\n  dropdownVisible = true;\n\n  @property({ type: Boolean })\n  hasServerAutoTranslation = false;\n\n  @property({ type: Boolean })\n  isOutsideChangeEvent = false;\n\n  updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n    if (changedProperties.has('selectedLocale')) {\n      this._selectedLocaleChanged(changedProperties.get('selectedLocale') as string);\n      this.fire('yp-selected-locale-changed', this.selectedLocale);\n    }\n  }\n\n  static supportedLanguages: Record<string, string> = {\n    en: 'English (US)',\n    en_GB: 'English (GB)',\n    fr: 'Français',\n    is: 'Íslenska',\n    es: 'Español',\n    cs: 'čeština',\n    it: 'Italiano',\n    ar: 'اَلْعَرَبِيَّةُ',\n    ar_EG: 'اَلْعَرَبِيَّةُ (EG)',\n    ca: 'Català',\n    ro_MD: 'Moldovenească',\n    ro: 'Românește',\n    de: 'Deutsch',\n    da: 'Dansk',\n    sv: 'Svenska',\n    en_CA: 'English (CA)',\n    nl: 'Nederlands',\n    no: 'Norsk',\n    uk: 'українська',\n    sq: 'Shqip',\n    ky: 'Кыргызча',\n    uz: 'Ўзбек',\n    tr: 'Türkçe',\n    fa: 'فارسی',\n    pl: 'Polski',\n    pt: 'Português',\n    pt_BR: 'Português (Brazil)',\n    ru: 'Русский',\n    hu: 'Magyar',\n    zh_TW: '国语 (TW)',\n    sk: 'Slovenčina',\n    sl: 'Slovenščina',\n    sr: 'Srpski',\n    sr_latin: 'Srpski (latin)',\n    hr: 'Hrvatski',\n    kl: 'Kalaallisut',\n    bg: 'български'\n  };\n\n  noGoogleTranslateLanguages = ['kl'];\n\n  _refreshLanguage() {\n    this.dropdownVisible = false;\n    this.refreshLanguages = !this.refreshLanguages;\n    setTimeout(() => {\n      this.dropdownVisible = true;\n    });\n  }\n\n  static get styles() {\n    return [\n      super.styles,\n      css`\n        mwc-select {\n          max-width: 250px;\n        }\n\n        .translateButton {\n          padding: 8px;\n          color: var(--accent-color);\n          margin-top: 8px;\n        }\n\n        .stopTranslateButton {\n          padding: 8px;\n          color: white;\n          background: var(--accent-color);\n          margin-top: 8px;\n        }\n\n        .translateText {\n          margin-left: 8px;\n        }\n\n        .stopIcon {\n          margin-left: 8px;\n        }\n      `,\n    ];\n  }\n\n  render() {\n    return html`\n      <div class=\"layout vertical\">\n        ${this.dropdownVisible\n          ? html`\n              <mwc-select .value=\"${this.value}\" label=\"Select language\">\n                ${this.languages.map(\n                  item => html`\n                    <mwc-list-item\n                      @click=\"${this._selectLanguage}\"\n                      .value=\"${item.language}\"\n                      >${item.name}</mwc-list-item\n                    >\n                  `\n                )}\n              </mwc-select>\n            `\n          : nothing}\n        <div ?hidden=\"${!this.canUseAutoTranslate}\">\n          <md-outlined-button\n            ?hidden=\"${this.autoTranslate}\"\n            raised\n            class=\"layout horizontal translateButton\"\n            @click=\"${this.startTranslation}\"\n            icon=\"translate\"\n            .label=\"${this.t('autoTranslate')}\">\n          </md-outlined-button>\n          <md-outlined-button\n            ?hidden=\"${!this.autoTranslate}\"\n            icon=\"translate\"\n            raised\n            class=\"layout horizontal stopTranslateButton\"\n            @click=\"${this._stopTranslation}\"\n            .title=\"${this.t('stopAutoTranslate')}\">\n            <md-icon class=\"stopIcon\">do_not_disturb</md-icon>\n          </md-outlined-button>\n        </div>\n      </div>\n    `;\n  }\n\n  _selectLanguage(event: CustomEvent) {\n    this.selectedLocale = (event.target as HTMLInputElement).value;\n  }\n\n  /*\n  behaviors: [\n    IronFormElementBehavior\n  ],\n*/\n\n  async connectedCallback() {\n    super.connectedCallback();\n    if (!this.noUserEvents) {\n      const response = (await window.serverApi.hasAutoTranslation()) as YpHasAutoTranslationResponse;\n      if (response && response.hasAutoTranslation === true) {\n        this.hasServerAutoTranslation = true;\n      } else {\n        this.hasServerAutoTranslation = false;\n      }\n      //TODO: Check this below!\n      //(Update dropdown language after it has been loaded from defaults)\n      setTimeout(() => {\n        this.selectedLocale = this.language;\n      }, 1500);\n    }\n\n    this.addGlobalListener(\n      'yp-refresh-language-selection',\n      this._refreshLanguage.bind(this)\n    );\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      'yp-refresh-language-selection',\n      this._refreshLanguage.bind(this)\n    );\n  }\n\n  _autoTranslateEvent(event: CustomEvent) {\n    this.autoTranslate = event.detail;\n  }\n\n  _stopTranslation() {\n    this.fireGlobal('yp-auto-translate', false);\n    window.appGlobals.autoTranslate = false;\n    this.fire('yp-language-name', YpLanguageSelector.supportedLanguages[this.language]);\n    /*window.appDialogs\n      .getDialogAsync(\n        'masterToast',\n         (toast) => {\n          toast.text = this.t('autoTranslationStopped');\n          toast.open = true\n        }\n      );*/\n    window.appGlobals.activity('click', 'stopTranslation', this.language);\n    sessionStorage.setItem('dontPromptForAutoTranslation', 'true');\n  }\n\n  startTranslation() {\n    if (this.canUseAutoTranslate) {\n      this.fireGlobal('yp-auto-translate', true);\n      window.appGlobals.autoTranslate = true;\n      this.fire('yp-language-name', YpLanguageSelector.supportedLanguages[this.language]);\n      /*window.appDialogs.getDialogAsync(\"masterToast\",  (toast) => {\n        toast.text = this.t('autoTranslationStarted');\n        toast.show();\n      });*/\n    }\n    window.appGlobals.activity('click', 'startTranslation', this.language);\n  }\n\n  get canUseAutoTranslate() {\n    if (\n      !this.autoTranslateOptionDisabled &&\n      this.language &&\n      this.hasServerAutoTranslation &&\n      !this.noUserEvents\n    ) {\n      const found = this.noGoogleTranslateLanguages.indexOf(this.language) > -1;\n      return !found;\n    } else {\n      return false;\n    }\n  }\n\n  get languages() {\n    if (YpLanguageSelector.supportedLanguages) {\n      let arr = [];\n      const highlighted = [];\n      let highlightedLocales = ['en', 'en_GB', 'is', 'fr', 'de', 'es', 'ar'];\n      if (window.appGlobals.highlightedLanguages) {\n        highlightedLocales = window.appGlobals.highlightedLanguages.split(',');\n      }\n      for (const key in YpLanguageSelector.supportedLanguages) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (YpLanguageSelector.supportedLanguages.hasOwnProperty(key)) {\n          if (highlightedLocales.indexOf(key) > -1) {\n            highlighted.push({\n              language: key,\n              name: YpLanguageSelector.supportedLanguages[key],\n            });\n          } else {\n            arr.push({ language: key, name: YpLanguageSelector.supportedLanguages[key] });\n          }\n        }\n      }\n\n      arr = arr.sort(function (a, b) {\n        if (a.name < b.name) {\n          return -1;\n        }\n        if (a.name > b.name) {\n          return 1;\n        }\n        return 0;\n      });\n      return highlighted.concat(arr);\n    } else {\n      return [];\n    }\n  }\n\n  _selectedLocaleChanged(oldLocale: string) {\n    if (this.selectedLocale) {\n      this.value = this.selectedLocale;\n      if (oldLocale) {\n        this.fire('changed', this.value);\n      }\n      if (!this.noUserEvents && oldLocale) {\n        if (!this.canUseAutoTranslate && this.autoTranslate) {\n          this._stopTranslation();\n        }\n        this.fire(\n          'yp-language-name',\n          YpLanguageSelector.supportedLanguages[this.selectedLocale]\n        );\n        window.appGlobals.changeLocaleIfNeeded(this.selectedLocale, true);\n        localStorage.setItem('yp-user-locale', this.selectedLocale);\n        console.info('Saving locale');\n        if (window.appUser && window.appUser.user) {\n          window.appUser.setLocale(this.selectedLocale);\n        }\n        window.appGlobals.activity(\n          'click',\n          'changeLanguage',\n          this.selectedLocale\n        );\n      }\n    }\n    this.isOutsideChangeEvent = false;\n  }\n}\n"]}