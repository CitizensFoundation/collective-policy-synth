{"version":3,"file":"yp-point.js","sourceRoot":"","sources":["../../../../src/@yrpri/yp-point/yp-point.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,eAAe,EAAE,MAAM,8BAA8B,CAAC;AAC/D,OAAO,EAAE,cAAc,EAAE,MAAM,6BAA6B,CAAC;AAG7D,OAAO,EAAE,IAAI,EAAc,GAAG,EAAkB,OAAO,EAAC,MAAM,KAAK,CAAC;AACpE,OAAO,EAAE,aAAa,EAAG,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAE7D,OAAO,gDAAgD,CAAC;AACxD,OAAO,4CAA4C,CAAC;AACpD,OAAO,kDAAkD,CAAC;AAC1D,OAAO,4BAA4B,CAAC;AAEpC,OAAO,qCAAqC,CAAC;AAE7C,OAAO,gCAAgC,CAAC;AAExC,OAAO,mCAAmC,CAAC;AAC3C,OAAO,uBAAuB,CAAC;AAE/B,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AACzD,OAAO,EAAE,aAAa,EAAE,MAAM,8BAA8B,CAAC;AAC7D,OAAO,EAAE,OAAO,EAAE,MAAM,mCAAmC,CAAC;AAC5D,8FAA8F;AAC9F,0FAA0F;AAGnF,IAAM,OAAO,GAAb,MAAM,OAAQ,SAAQ,aAAa;IAAnC;;QAWL,cAAS,GAAG,KAAK,CAAC;QAGlB,mBAAc,GAAG,IAAI,CAAC;QAGtB,aAAQ,GAAG,KAAK,CAAC;QAGjB,gBAAW,GAAG,KAAK,CAAC;QAGpB,cAAS,GAAG,KAAK,CAAC;QAGlB,0BAAqB,GAAG,KAAK,CAAC;QAG9B,qBAAgB,GAAG,KAAK,CAAC;QAGzB,sCAAiC,GAAG,CAAC,CAAC;QAStC,gBAAW,GAAG,KAAK,CAAC;QAYpB,gBAAW,GAAG,KAAK,CAAC;QASpB,uBAAkB,GAAG,KAAK,CAAC;QAG3B,kBAAa,GAAG,KAAK,CAAC;QAGtB,yBAAoB,GAAG,KAAK,CAAC;IAo6B/B,CAAC;IA15BC,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,CAAC,iBAAiB,CACpB,qBAAqB,EACrB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAC9B,CAAC;QACF,IAAI,CAAC,iBAAiB,CAAC,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,iBAAiB,CACpB,yBAAyB,EACzB,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CACpC,CAAC;IACJ,CAAC;IAED,oBAAoB;QAClB,KAAK,CAAC,oBAAoB,EAAE,CAAC;QAC7B,IAAI,CAAC,oBAAoB,CACvB,qBAAqB,EACrB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAC9B,CAAC;QACF,IAAI,CAAC,oBAAoB,CAAC,cAAc,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACzE,IAAI,CAAC,oBAAoB,CACvB,yBAAyB,EACzB,IAAI,CAAC,mBAAmB,CACzB,CAAC;QACF,2BAA2B;QAC3B,cAAc,CAAC,oBAAoB,CAAC,IAAwC,CAAC,CAAC;IAChF,CAAC;IAED,OAAO,CAAC,iBAAyD;QAC/D,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAEjC,IAAI,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;YAClC,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;QAED,IAAI,iBAAiB,CAAC,GAAG,CAAC,uBAAuB,CAAC,EAAE;YAClD,IAAI,CAAC,6BAA6B,EAAE,CAAC;SACtC;QAED,IAAI,iBAAiB,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;YACtC,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;IACH,CAAC;IAED,MAAM,KAAK,MAAM;QACf,OAAO;YACL,KAAK,CAAC,MAAM;YACZ,OAAO;YACP,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAsLF;SACF,CAAC;IACJ,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAA;+CACuC,IAAI,CAAC,kBAAkB;UAC5D,IAAI,CAAC,IAAK,CAAC,KAAK,CAAC,aAAa,CAAC,wBAAwB;YACvD,CAAC,CAAC,IAAI,CAAA;;;oCAGoB,IAAI,CAAC,IAAK,CAAC,KAAK,CAAC,QAAQ;4BACjC,IAAI,CAAC,IAAK,CAAC,KAAK,CAAC,aAAa;iBACvC,wBAAwB;8BACb,IAAI,CAAC,IAAK,CAAC,KAAK,CAAC,EAAE;;;aAGpC;YACH,CAAC,CAAC,EAAE;UACJ,CAAC,IAAI,CAAC,IAAK,CAAC,KAAK,CAAC,aAAa,CAAC,wBAAwB;YACxD,CAAC,CAAC,IAAI,CAAA,IAAI,IAAI,CAAC,CAAC,CAAC,kBAAkB,CAAC,GAAG;YACvC,CAAC,CAAC,EAAE;;;;uBAIS,IAAI,CAAC,SAAS;mBAClB,IAAI,CAAC,kBAAkB;kBACxB,IAAI,CAAC,aAAa;;;;;;8BAMN,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,aAAa,EAAE,QAAQ;sBACvD,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,aAAa,EAAE,IAAI;wBACzC,IAAI,CAAC,KAAK,CAAC,EAAE;;;;KAIhC,CAAC;IACJ,CAAC;IAED,gBAAgB;QACd,OAAO,IAAI,CAAC,IAAI;YACd,CAAC,CAAC,IAAI,CAAA;;sBAEU,IAAI,CAAC,QAAQ;wBACX,IAAI,CAAC,UAAU;qBAClB,IAAI,CAAC,QAAQ;;;;uBAIX,IAAI,CAAC,IAAK,CAAC,KAAK,CAAC,aAAa,CAAC,eAAe;;;;uBAI9C,CAAC,IAAI,CAAC,QAAQ;;;gEAG2B,CAAC,IAAI,CAAC,UAAU;;;;4BAIpD,IAAI,CAAC,KAAK,CAAC,UAAU;;uBAE1B,IAAI,CAAC,IAAI;;;eAGjB;YACT,CAAC,CAAC,OAAO,CAAC;IACd,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAA;;yBAEU,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI;kBACvB,IAAI,CAAC,KAAK,CAAC,IAAI;;;;wBAIT,IAAI,CAAC,SAAS;qBACjB,IAAI,CAAC,kBAAkB;oBACxB,IAAI,CAAC,aAAa;;;;;gCAKN,IAAI,CAAC,KAAK,CAAC,QAAQ;wBAC3B,IAAI,CAAC,KAAK,CAAC,aAAa;0BACtB,IAAI,CAAC,KAAK,CAAC,EAAE;;;;;KAKlC,CAAC;IACJ,CAAC;IAED,kBAAkB;QAChB,OAAO,IAAI,CAAA;QACP,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc;YACvC,CAAC,CAAC,IAAI,CAAA;mDACqC,IAAI,CAAC,aAAa;;;;8BAIvC,IAAI,CAAC,aAAa;8BAClB,IAAI,CAAC,YAAY;;;;0BAIrB,IAAI,CAAC,cAAc;;6BAEhB,IAAI,CAAC,mBAAmB;gBACjC,CAAC,CAAC,IAAI,CAAC,mBAAmB;gBAC1B,CAAC,CAAC,EAAE;;;;WAIb;YACH,CAAC,CAAC,OAAO;QACT,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc;YACvC,CAAC,CAAC,IAAI,CAAA;;;;4BAIc,IAAI,CAAC,YAAY;;;;wBAIrB,IAAI,CAAC,cAAc;;;;WAIhC;YACH,CAAC,CAAC,OAAO;QACT,IAAI,CAAC,kBAAkB;YACvB,CAAC,CAAC,IAAI,CAAA;;qBAEO,IAAI,CAAC,CAAC,CAAC,uBAAuB,CAAC;;;;;WAKzC;YACH,CAAC,CAAC,OAAO;;;;mBAIE,CAAC,IAAI,CAAC,oBAAoB;;UAEnC,IAAI,CAAC,CAAC,CAAC,sBAAsB,CAAC;;;QAGhC,IAAI,CAAC,KAAK,CAAC,aAAa;YACxB,CAAC,CAAC,IAAI,CAAA;;;;oBAIM,IAAI,CAAC,CAAC,CAAC,qBAAqB,CAAC;;;6BAGpB,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,sBAAsB;;;8BAGpD,IAAI,CAAC,CAAC,CAAC,cAAc,CAAC;;;8BAGtB,IAAI,CAAC,QAAQ;+BACZ,IAAI,CAAC,cAAc;;;8BAGpB,IAAI,CAAC,CAAC,CAAC,eAAe,CAAC;;;8BAGvB,IAAI,CAAC,UAAU;+BACd,CAAC,IAAI,CAAC,cAAc;;;;;;8BAMrB,IAAI,CAAC,SAAS;2BACjB,IAAI,CAAC,SAAS;0BACf,IAAI,CAAC,aAAa;;;6BAGf,CAAC,IAAI,CAAC,cAAc;;;sCAGX,IAAI,CAAC,KAAK,CAAC,QAAQ;8BAC3B,IAAI,CAAC,KAAK,CAAC,aAAa;gCACtB,IAAI,CAAC,KAAK,CAAC,EAAE;;;;;WAKlC;YACH,CAAC,CAAC,OAAO;KACZ,CAAC;IACJ,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAA;;;;;;oBAMK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;;;;;;;sBAOhC,IAAI,CAAC,WAAW;sBAChB,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;;;sBAGhB,IAAI,CAAC,SAAS;sBACd,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;;;;KAIjC,CAAC;IACJ,CAAC;IAED,cAAc;QACZ,OAAO,IAAI,CAAA;;;oBAGK,IAAI,CAAC,CAAC,CAAC,kBAAkB,CAAC;qBACzB,CAAC,IAAI,CAAC,qBAAqB;;oBAE5B,IAAI,CAAC,iBAAiB;;;oBAGtB,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;qBACb,CAAC,IAAI,CAAC,YAAY;;oBAEnB,IAAI,CAAC,UAAU;;;oBAGf,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC;;oBAEhB,IAAI,CAAC,YAAY;;;KAGhC,CAAC;IACJ,CAAC;IACD,MAAM;QACJ,OAAO,IAAI,CAAA;;UAEL,IAAI,CAAC,gBAAgB,EAAE;;;YAGrB,IAAI,CAAC,kBAAkB;YACvB,CAAC,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC3B,CAAC,CAAC,IAAI,CAAC,eAAe,EAAE;YACxB,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC,OAAO;YAC7D,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,OAAO;;;;uBAItC,IAAI,CAAC,WAAW;;;wBAGf,IAAI,CAAC,KAAK;2BACP,IAAI,CAAC,QAAQ;gCACR,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,aAAa;;;;wBAIvC,IAAI,CAAC,CAAC,CAAC,cAAc,CAAC;;;wBAGtB,IAAI,CAAC,YAAY;;;;cAI3B,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,OAAO;;;;KAI9D,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC5B,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;IAED,UAAU;QACR,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC5B,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC;IAED,IAAI,kBAAkB;QACpB,OAAO,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,qBAAqB,CAAC;IACtD,CAAC;IAED,IAAI,iBAAiB;QACnB,IACE,IAAI,CAAC,IAAI;YACT,IAAI,CAAC,IAAI,CAAC,KAAK;YACf,IAAI,CAAC,KAAK,CAAC,WAAW;YACtB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa;YACpC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI;YACzC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa;YAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,yBAAyB,EACvD;YACA,OAAO,IAAI,CAAC;SACb;aAAM;YACL,OAAO,KAAK,CAAC;SACd;IACH,CAAC;IAED,IAAI,qBAAqB;QACvB,IACE,IAAI,CAAC,IAAI;YACT,IAAI,CAAC,IAAI,CAAC,KAAK;YACf,eAAe,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC;YACnD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa;YAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,yBAAyB,EACvD;YACA,OAAO,IAAI,CAAC;SACb;aAAM;YACL,OAAO,KAAK,CAAC;SACd;IACH,CAAC;IAED,IAAI,kBAAkB;QACpB,OAAO,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC;IAC9C,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9B,CAAC;IAED,6BAA6B;QAC3B,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9B,CAAC;IAED,SAAS,CAAC,KAAkB;QAC1B,MAAM,CAAC,UAAU,CAAC,QAAQ,CACxB,gBAAgB,EAChB,KAAK,CAAC,MAAM,CAAC,KAAK,EAClB,IAAI,CAAC,KAAK,CAAC,EAAE,CACd,CAAC;IACJ,CAAC;IAED,IAAI,QAAQ;QACV,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,EAAE;YAC3B,OAAO,CACL,MAAM,CAAC,QAAQ,CAAC,QAAQ;gBACxB,IAAI;gBACJ,MAAM,CAAC,QAAQ,CAAC,QAAQ;gBACxB,QAAQ;gBACR,IAAI,CAAC,IAAI,CAAC,EAAE;gBACZ,GAAG;gBACH,IAAI,CAAC,KAAK,CAAC,EAAE,CACd,CAAC;SACH;IACH,CAAC;IAED,aAAa;QACX,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,EAAE;YAC/B,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;SACpD;IACH,CAAC;IAED,oBAAoB;QAClB,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,UAAU,CAAC,GAAG,EAAE;gBACd,MAAM,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,qBAAqB,CAAqB,CAAC;gBACjE,MAAM,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,qBAAqB,CAAoB,CAAC;gBAChE,IAAI,KAAK,IAAI,KAAK,EAAE;oBAClB,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC;iBAC3B;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,uCAAuC,CAAC,CAAC;iBACxD;YACH,CAAC,EAAE,GAAG,CAAC,CAAC;SACT;aAAM,IAAI,IAAI,CAAC,qBAAqB,EAAE;YACrC,UAAU,CAAC,GAAG,EAAE;gBACd,MAAM,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,0BAA0B,CAAqB,CAAC;gBACtE,MAAM,KAAK,GAAG,IAAI,CAAC,EAAE,CACnB,iCAAiC,CACf,CAAC;gBACrB,IAAI,KAAK,IAAI,KAAK,EAAE;oBAClB,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC;iBAC3B;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,uCAAuC,CAAC,CAAC;iBACxD;YACH,CAAC,EAAE,GAAG,CAAC,CAAC;SACT;IACH,CAAC;IAED,WAAW;QACT,qCAAqC;QACrC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IAED,KAAK,CAAC,SAAS;QACb,MAAM,KAAK,GAAG,CAAC,MAAM,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE;YAC/D,OAAO,EAAE,IAAI,CAAC,QAAQ;SACvB,CAAC,CAAgB,CAAC;QACnB,IAAI,KAAK,EAAE;YACT,KAAK,CAAC,aAAa,GAAG,KAAK,CAAC,cAAe,CACzC,KAAK,CAAC,cAAe,CAAC,MAAM,GAAG,CAAC,CACjC,CAAC,OAAO,CAAC;YACV,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACpB;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IAED,uBAAuB;QACrB,qCAAqC;QACrC,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;IACrC,CAAC;IAED,KAAK,CAAC,qBAAqB;QACzB,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,uBAAuB,CAC7D,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAClB,IAAI,CAAC,KAAK,CAAC,EAAE,EACb;YACE,OAAO,EAAE,IAAI,CAAC,oBAAoB;SACnC,CACF,CAAC;QAEF,IAAI,QAAQ,EAAE;YACZ,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW;gBAAE,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,EAAE,CAAC;YACzD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa,GAAG;gBACrC,IAAI,EAAE,QAAQ,CAAC,OAAO;aACvB,CAAC;YACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACpD,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACnC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAC9B;QACD,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;IACrC,CAAC;IAED,YAAY;QACV,MAAM,CAAC,UAAU,CAAC,cAAc,CAC9B,oBAAoB,EACpB,CAAC,MAAW,CAAC,wBAAwB,EAAE,EAAE;YACvC,MAAM,CAAC,IAAI,CACT,IAAI,CAAC,CAAC,CAAC,qBAAqB,CAAC,EAC7B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CACnC,CAAC;QACJ,CAAC,CACF,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,kBAAkB;QACtB,MAAM,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAElD,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;QAC1D,6BAA6B;QAC7B,yBAAyB;IAC3B,CAAC;IAED,YAAY;QACV,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;QACnD,MAAM,CAAC,UAAU,CAAC,cAAc,CAC9B,iBAAiB,EACjB,CAAC,MAAW,CAAC,qBAAqB,EAAE,EAAE;YACpC,MAAM,CAAC,KAAK,CACV,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,SAAS,EAC1C,IAAI,CAAC,CAAC,CAAC,oBAAoB,CAAC,EAC5B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EACzB,IAAI,CAAC,CAAC,CAAC,cAAc,CAAC,EACtB,KAAK,CACN,CAAC;YACF,MAAM,CAAC,IAAI,EAAE,CAAC;QAChB,CAAC,CACF,CAAC;IACJ,CAAC;IAED,SAAS;QACP,MAAM,CAAC,UAAU,CAAC,kBAAkB,CAClC,IAAI,CAAC,CAAC,CAAC,cAAc,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CACnD,CAAC;IACJ,CAAC;IAED,UAAU;QACR,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE;YACpD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CACvC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CACrC,CAAC,OAAO,CAAC;YACV,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;IACH,CAAC;IAED,iBAAiB;QACf,IACE,IAAI,CAAC,IAAI;YACT,eAAe,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,EACnD;YACA,IAAI,CAAC,oBAAoB;gBACvB,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa;oBAC5D,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI;oBAC3C,CAAC,CAAC,EAAE,CAAC;YACT,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;SACnC;IACH,CAAC;IAED,IAAI,cAAc;QAChB,OAAO,eAAe,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACtD,CAAC;IAED,IAAI,YAAY;QACd,IACE,IAAI,CAAC,KAAK;YACV,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;gBAC5D,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAChE;YACA,qCAAqC;YACrC,OAAO,eAAe,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACrD;aAAM;YACL,MAAM,UAAU,GACd,IAAI,CAAC,KAAK;gBACV,IAAI,CAAC,KAAK,CAAC,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,oBAAoB;oBAC7D,IAAI,CAAC,iCAAiC,CAAC;YAC3C,OAAO,CACL,UAAU;gBACV,MAAM,CAAC,OAAO;gBACd,MAAM,CAAC,OAAO,CAAC,IAAI;gBACnB,IAAI,CAAC,KAAK;gBACV,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAC7C,CAAC;SACH;IACH,CAAC;IAED,YAAY,CAAC,iBAAyD;QACpE,KAAK,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;QACtC,2BAA2B;QAC3B,cAAc,CAAC,oBAAoB,CAAC,IAAwC,CAAC,CAAC;IAChF,CAAC;IAED,mBAAmB;QACjB,2BAA2B;QAC3B,cAAc,CAAC,kBAAkB,CAAC,IAAwC,CAAC,CAAC;IAC9E,CAAC;IAED,aAAa;QACX,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IACE,IAAI,CAAC,IAAI;gBACT,IAAI,CAAC,IAAI,CAAC,KAAK;gBACf,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa;gBAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,sBAAsB,EACpD;gBACA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;aAC7B;YACD,IAAI,yBAAyB,GAAG,KAAK,CAAC;YACtC,IACE,IAAI,CAAC,IAAI;gBACT,IAAI,CAAC,IAAI,CAAC,KAAK;gBACf,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa;gBAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,yBAAyB,EACvD;gBACA,yBAAyB,GAAG,IAAI,CAAC;aAClC;YACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YAC5B,MAAM,QAAQ,GAAG,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;YACpE,MAAM,cAAc,GAAG,cAAc,CAAC,iBAAiB,CACrD,IAAI,CAAC,KAAK,CAAC,WAAW,EACtB,SAAS,CACV,CAAC;YACF,IAAI,CAAC,aAAa,GAAG,cAAc,CAAC,eAAe,CACjD,IAAI,CAAC,KAAK,CAAC,WAAW,CACvB,CAAC;YACF,IAAI,QAAQ,IAAI,cAAc,EAAE;gBAC9B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;gBAC/B,IAAI,CAAC,mBAAmB,GAAG,cAAc,CAAC;gBAC1C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,WAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAClD,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;gBAClC,IAAI,CAAC,yBAAyB;oBAC5B,IAAI,CAAC,KAAK,CAAC,kBAAkB,KAAK,OAAO;oBACzC,MAAM,CAAC,UAAU,CAAC,oBAAoB,KAAK,IAAI,EAC/C;oBACA,IAAI,CAAC,sBAAsB,EAAE,CAAC;oBAC9B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;oBAC/B,IAAI,CAAC,KAAK,CAAC,kBAAkB,GAAG,SAAS,CAAC;iBAC3C;aACF;iBAAM;gBACL,MAAM,QAAQ,GAAG,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;gBACpE,IAAI,QAAQ,EAAE;oBACZ,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;oBACxB,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;oBAC/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,WAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;oBAClD,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;oBAClC,IACE,CAAC,yBAAyB;wBAC1B,IAAI,CAAC,KAAK,CAAC,kBAAkB,KAAK,OAAO;wBACzC,MAAM,CAAC,UAAU,CAAC,oBAAoB,KAAK,IAAI,EAC/C;wBACA,IAAI,CAAC,sBAAsB,EAAE,CAAC;wBAC9B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;wBAC/B,IAAI,CAAC,KAAK,CAAC,kBAAkB,GAAG,SAAS,CAAC;qBAC3C;iBACF;aACF;SACF;aAAM;YACL,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;YACtB,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;SACnC;IACH,CAAC;IAED,KAAK,CAAC,sBAAsB;QAC1B,IAAI,IAAI,CAAC;QACT,IAAI,IAAI,CAAC,WAAW;YAAE,IAAI,GAAG,uBAAuB,CAAC;;YAChD,IAAI,GAAG,uBAAuB,CAAC;QAEpC,MAAM,SAAS,GAAG,CAAC,MAAM,MAAM,CAAC,SAAS,CAAC,0BAA0B,CAClE,IAAI,EACJ,IAAI,CAAC,KAAK,CAAC,EAAE,CACd,CAAiC,CAAC;QACnC,IAAI,SAAS,CAAC,KAAK,EAAE;YACnB,MAAM,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;YAC9B,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAChC,KAAK,CAAC,aAAa,GAAG,KAAK,CAAC,cAAe,CACzC,KAAK,CAAC,cAAe,CAAC,MAAM,GAAG,CAAC,CACjC,CAAC,OAAO,CAAC;YACV,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;YAC5C,IAAI,IAAI,CAAC,cAAc,EAAE;gBACvB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,aAAa,CAAC;gBACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACvB;YACD,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;aAAM,IAAI,SAAS,IAAI,SAAS,CAAC,UAAU,EAAE;YAC5C,UAAU,CAAC,GAAG,EAAE;gBACd,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAChC,CAAC,EAAE,IAAI,CAAC,CAAC;SACV;aAAM,IAAI,SAAS,IAAI,SAAS,CAAC,KAAK,EAAE;YACvC,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAChC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;SACjC;IACH,CAAC;IAED,WAAW;QACT,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,mBAAmB,GAAG,SAAS,CAAC;QACrC,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;IAChC,CAAC;IAED,SAAS;QACP,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;SAC7B;IACH,CAAC;IAED,IAAI,QAAQ;QACV,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,EAAE;gBACzB,OAAO,IAAI,CAAC;aACb;iBAAM;gBACL,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;aAC7B;SACF;aAAM;YACL,OAAO,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;YAC9C,OAAO,KAAK,CAAC;SACd;IACH,CAAC;IAED,IAAI,UAAU;QACZ,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,EAAE;gBACzB,OAAO,IAAI,CAAC;aACb;iBAAM;gBACL,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;aAC7B;SACF;aAAM;YACL,OAAO,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;YAChD,OAAO,KAAK,CAAC;SACd;IACH,CAAC;CACF,CAAA;AAv+BC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;sCACP;AAEpB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;qCACT;AAElB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;qCACE;AAE7B;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;0CACV;AAElB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;+CACN;AAEtB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;yCACX;AAEjB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;4CACR;AAEpB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;0CACV;AAElB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;sDACE;AAE9B;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;iDACH;AAEzB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;kEACW;AAEtC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;yCACE;AAE7B;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;qDACc;AAEzC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;4CACR;AAEpB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;+CACQ;AAEnC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;oDACa;AAExC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;6CACM;AAEjC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;4CACR;AAEpB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;+CACQ;AAEnC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;6CACM;AAEjC;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;mDACD;AAE3B;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;8CACN;AAEtB;IAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;;qDACC;AApElB,OAAO;IADnB,aAAa,CAAC,UAAU,CAAC;GACb,OAAO,CAw+BnB;SAx+BY,OAAO","sourcesContent":["import { YpAccessHelpers } from '../common/YpAccessHelpers.js';\nimport { YpMediaHelpers } from '../common/YpMediaHelpers.js';\n\nimport { YpCollection } from '../yp-collection/yp-collection.js';\nimport { html, LitElement, css, TemplateResult, nothing} from 'lit';\nimport { customElement,  property } from 'lit/decorators.js';\n\nimport '@material/web/textfield/outlined-text-field.js';\nimport '@material/mwc-circular-progress-four-color';\nimport '@material/web/iconbutton/outlined-icon-button.js';\nimport '@material/web/icon/icon.js';\n\nimport '../yp-file-upload/yp-file-upload.js';\nimport { YpEmojiSelector } from '../common/yp-emoji-selector.js';\nimport '../common/yp-emoji-selector.js';\n\nimport '../yp-magic-text/yp-magic-text.js';\nimport './yp-point-actions.js';\n\nimport { YpNavHelpers } from '../common/YpNavHelpers.js';\nimport { YpBaseElement } from '../common/yp-base-element.js';\nimport { Layouts } from '../../flexbox-literals/classes.js';\n//import { any /*YpApiActionDialog*/ } from '../yp-api-action-dialog/yp-api-action-dialog.js';\n//import { YpConfirmationDialog } from '../yp-dialog-container/yp-confirmation-dialog.js';\n\n@customElement('yp-point')\nexport class YpPoint extends YpBaseElement {\n  @property({ type: Object })\n  point!: YpPointData;\n\n  @property({ type: Object })\n  post!: YpPostData;\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: Boolean })\n  linkPoint = false;\n\n  @property({ type: Boolean })\n  openTranscript = true;\n\n  @property({ type: Boolean })\n  hideUser = false;\n\n  @property({ type: Boolean })\n  hideActions = false;\n\n  @property({ type: Boolean })\n  isEditing = false;\n\n  @property({ type: Boolean })\n  isAdminCommentEditing = false;\n\n  @property({ type: Boolean })\n  hasAdminComments = false;\n\n  @property({ type: Number })\n  maxNumberOfPointsBeforeEditFrozen = 5;\n\n  @property({ type: String })\n  editText: string | undefined;\n\n  @property({ type: String })\n  editAdminCommentText: string | undefined;\n\n  @property({ type: Boolean })\n  videoActive = false;\n\n  @property({ type: String })\n  pointVideoPath: string | undefined;\n\n  @property({ type: String })\n  pointImageVideoPath: string | undefined;\n\n  @property({ type: Number })\n  pointVideoId: number | undefined;\n\n  @property({ type: Boolean })\n  audioActive = false;\n\n  @property({ type: String })\n  pointAudioPath: string | undefined;\n\n  @property({ type: Number })\n  pointAudioId: number | undefined;\n\n  @property({ type: Boolean })\n  checkingTranscript = false;\n\n  @property({ type: Boolean })\n  portraitVideo = false;\n\n  @property({ type: Boolean })\n  checkTranscriptError = false;\n\n  playStartedAt: Date | undefined;\n  videoPlayListener: Function | undefined;\n  videoPauseListener: Function | undefined;\n  videoEndedListener: Function | undefined;\n  audioPlayListener: Function | undefined;\n  audioPauseListener: Function | undefined;\n  audioEndedListener: Function | undefined;\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addGlobalListener(\n      'yp-got-admin-rights',\n      this.requestUpdate.bind(this)\n    );\n    this.addGlobalListener('yp-logged-in', this.requestUpdate.bind(this));\n    this.addGlobalListener(\n      'yp-pause-media-playback',\n      this._pauseMediaPlayback.bind(this)\n    );\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeGlobalListener(\n      'yp-got-admin-rights',\n      this.requestUpdate.bind(this)\n    );\n    this.removeGlobalListener('yp-logged-in', this.requestUpdate.bind(this));\n    this.removeGlobalListener(\n      'yp-pause-media-playback',\n      this._pauseMediaPlayback\n    );\n    //TODO: Remove unknown cast\n    YpMediaHelpers.detachMediaListeners(this as unknown as YpElementWithPlayback);\n  }\n\n  updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('point')) {\n      this._pointChanged();\n    }\n\n    if (changedProperties.has('isAdminCommentEditing')) {\n      this._isAdminCommentEditingChanged();\n    }\n\n    if (changedProperties.has('isEditing')) {\n      this._isEditingChanged();\n    }\n  }\n\n  static get styles() {\n    return [\n      super.styles,\n      Layouts,\n      css`\n        :host {\n          display: block;\n        }\n\n        .point-content {\n          padding-right: 16px;\n          padding-left: 16px;\n          margin-top: 16px;\n        }\n\n        #pointContentTranscript,\n        #pointContent {\n          cursor: default;\n        }\n\n        #pointContentTranscript,\n        #pointContent[link-point] {\n          cursor: pointer;\n        }\n\n        @media (max-width: 320px) {\n          .user-image {\n            display: none;\n          }\n        }\n\n        .userInfoContainer {\n          border-bottom: solid 4px;\n          width: 100%;\n          padding-bottom: 16px;\n        }\n\n        .userInfoContainer[up-vote] {\n          border-bottom-color: var(--master-point-up-color);\n        }\n\n        .userInfoContainer[down-vote] {\n          border-bottom-color: var(--master-point-down-color);\n        }\n\n        md-outlined-icon-button {\n        }\n\n        #reportPointIconButton {\n          width: 36px;\n          height: 36px;\n        }\n\n        .thumbsIcon {\n          padding-left: 0;\n          padding-right: 0;\n        }\n\n        @media (min-width: 985px) {\n          .thumbsIcon {\n          }\n        }\n\n        md-icon.thumbsIconUp {\n          color: var(--master-point-up-color);\n        }\n\n        md-icon.thumbsIconDown {\n        }\n\n        yp-user-with-organization {\n          padding-left: 16px;\n        }\n\n        .actionContainer {\n          margin-top: 8px;\n          margin-bottom: 16px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .pointer {\n          cursor: pointer;\n        }\n\n        yp-image,\n        video {\n          width: 398px;\n          height: 224px;\n          margin: 0;\n          padding: 0;\n        }\n\n        @media (max-width: 600px) {\n          yp-image,\n          video {\n            width: 100%;\n            margin: 0 !important;\n            padding: 0;\n            height: initial;\n            vertical-align: top;\n          }\n\n          .actionContainer {\n            margin-left: 12px;\n          }\n\n          #videoPlayer[portrait] {\n            width: 50% !important;\n          }\n        }\n\n        .topContainer[portrait] {\n          background-color: #777;\n        }\n\n        #pointContentEditor,\n        #pointAdminCommentEditor {\n          padding-left: 8px;\n          padding-right: 8px;\n        }\n\n        #pointAdminCommentContent {\n          padding-left: 16px;\n          padding-right: 16px;\n        }\n\n        .commentFromAdmin {\n          padding-left: 16px;\n          padding-right: 16px;\n          padding-top: 16px;\n          font-size: 16px;\n          padding-bottom: 2px;\n          font-weight: bold;\n        }\n\n        .commentFromAdminInput {\n          padding: 0;\n        }\n\n        .transcriptError {\n          margin-top: 8px;\n          color: var(--md-error-color);\n        }\n\n        mwc-circular-progress-four-color {\n          margin-top: 4px;\n        }\n\n        .checkTranscript {\n          margin-top: 8px;\n          padding: 8px;\n        }\n\n        .transcriptText {\n          margin-top: 0;\n          padding: 8px;\n          padding-bottom: 0;\n          font-style: italic;\n        }\n\n        .transcriptHeader {\n          margin-bottom: 2px;\n          font-style: normal;\n        }\n\n        audio {\n          margin-top: 16px;\n          margin-bottom: 16px;\n        }\n\n        video {\n        }\n\n        #pointContent {\n        }\n\n        md-outlined-icon-button.openCloseButton {\n          width: 54px;\n          height: 54px;\n          margin-top: -16px;\n          padding-left: 0;\n          margin-left: 0;\n        }\n      `,\n    ];\n  }\n\n  renderAdminComments() {\n    html`\n      <div class=\"commentFromAdmin\" ?hidden=\"${this.isEditingSomething}\">\n        ${this.post!.Group.configuration.customAdminCommentsTitle\n          ? html`\n              <yp-magic-text\n                textType=\"customAdminCommentsTitle\"\n                .contentLanguage=\"${this.post!.Group.language}\"\n                .content=\"${this.post!.Group.configuration\n                  .customAdminCommentsTitle}\"\n                .contentId=\"${this.post!.Group.id}\"\n              >\n              </yp-magic-text>\n            `\n          : ``}\n        ${!this.post!.Group.configuration.customAdminCommentsTitle\n          ? html` ${this.t('commentFromAdmin')} `\n          : ``}\n      </div>\n      <div\n        id=\"pointAdminCommentContent\"\n        ?link-point=\"${this.linkPoint}\"\n        ?hidden=\"${this.isEditingSomething}\"\n        @click=\"${this._linkIfNeeded}\"\n      >\n        <yp-magic-text\n          simple-format\n          textType=\"pointAdminCommentContent\"\n          truncate=\"1500\"\n          .contentLanguage=\"${this.point.public_data?.admin_comment?.language}\"\n          .content=\"${this.point.public_data?.admin_comment?.text}\"\n          .contentId=\"${this.point.id}\"\n        >\n        </yp-magic-text>\n      </div>\n    `;\n  }\n\n  renderUserHeader() {\n    return this.user\n      ? html`<div\n          class=\"userInfoContainer layout horizontal\"\n          ?up-vote=\"${this.isUpVote}\"\n          ?down-vote=\"${this.isDownVote}\"\n          ?hidden=\"${this.hideUser}\"\n        >\n        <div\n            class=\"layout horizontal\"\n            ?hidden=\"${this.post!.Group.configuration.hidePointAuthor}\"\n          >\n          <md-icon\n            class=\"thumbsIcon thumbsIconUp\"\n            ?hidden=\"${!this.isUpVote}\"\n            >thumb_up</md-icon\n          >\n          <md-icon class=\"thumbsIcon thumbsIconDown\" ?hidden=\"${!this.isDownVote}\"\n            >thumb_down</md-icon\n          >\n          <yp-user-with-organization\n              .titleDate=\"${this.point.created_at}\"\n              inverted\n              .user=\"${this.user}\"\n            ></yp-user-with-organization>\n          </div>\n        </div>`\n      : nothing;\n  }\n\n  renderTextPoint() {\n    return html`\n      <div class=\"point-content layout vertical \">\n        <span ?hidden=\"${!this.point.name}\">\n          <span>${this.point.name}</span>.\n        </span>\n        <div\n          id=\"pointContent\"\n          .linkPoint=\"${this.linkPoint}\"\n          ?hidden=\"${this.isEditingSomething}\"\n          @click=\"${this._linkIfNeeded}\"\n        >\n          <yp-magic-text\n            simpleFormat\n            textType=\"pointContent\"\n            .contentLanguage=\"${this.point.language}\"\n            .content=\"${this.point.latestContent}\"\n            .contentId=\"${this.point.id}\"\n          >\n          </yp-magic-text>\n        </div>\n      </div>\n    `;\n  }\n\n  renderVideoOrAudio() {\n    return html`\n      ${this.videoActive && this.pointVideoPath\n        ? html`\n            <div class=\"topContainer\" ?portrait=\"${this.portraitVideo}\">\n              <div class=\"layout horizontal center-center\">\n                <video\n                  id=\"videoPlayer\"\n                  portrait=\"${this.portraitVideo}\"\n                  .data-id=\"${this.pointVideoId}\"\n                  controls\n                  preload=\"none\"\n                  class=\"video\"\n                  .src=\"${this.pointVideoPath}\"\n                  playsinline\n                  .poster=\"${this.pointImageVideoPath\n                    ? this.pointImageVideoPath\n                    : ''}\"\n                ></video>\n              </div>\n            </div>\n          `\n        : nothing}\n      ${this.audioActive && this.pointAudioPath\n        ? html`\n            <div class=\"layout vertical center-center\">\n              <audio\n                id=\"audioPlayer\"\n                .data-id=\"${this.pointAudioId}\"\n                controls\n                preload=\"metadata\"\n                class=\"audio\"\n                .src=\"${this.pointAudioPath}\"\n                playsinline\n              ></audio>\n            </div>\n          `\n        : nothing}\n      ${this.checkingTranscript\n        ? html`\n            <div class=\"layout vertical center-center checkTranscript\">\n              <div>${this.t('checkingForTranscript')}</div>\n              <mwc-circular-progress-four-color\n                indeterminate\n              ></mwc-circular-progress-four-color>\n            </div>\n          `\n        : nothing}\n\n      <div\n        class=\"transcriptError layout horizontal center-center\"\n        ?hidden=\"${!this.checkTranscriptError}\"\n      >\n        ${this.t('checkTranscriptError')}\n      </div>\n\n      ${this.point.latestContent\n        ? html`\n            <div class=\"transcriptText layout vertical center-center\">\n              <div class=\"layout horizontal\">\n                <div class=\"transcriptHeader\">\n                  ${this.t('automaticTranscript')}\n                </div>\n                <div\n                  ?hidden=\"${!this.post.Group.configuration.collapsableTranscripts}\"\n                >\n                  <md-outlined-icon-button\n                    .label=\"${this.t('openComments')}\"\n                    class=\"openCloseButton\"\n                    icon=\"keyboard_arrow_right\"\n                    @click=\"${this._setOpen}\"\n                    ?hidden=\"${this.openTranscript}\"\n                  ></md-outlined-icon-button>\n                  <md-outlined-icon-button\n                    .label=\"${this.t('closeComments')}\"\n                    class=\"openCloseButton\"\n                    icon=\"keyboard_arrow_down\"\n                    @click=\"${this._setClosed}\"\n                    ?hidden=\"${!this.openTranscript}\"\n                  ></md-outlined-icon-button>\n                </div>\n              </div>\n              <div\n                id=\"pointContentTranscript\"\n                .linkPoint=\"${this.linkPoint}\"\n                ?hidden=\"${this.isEditing}\"\n                @click=\"${this._linkIfNeeded}\"\n              >\n                <yp-magic-text\n                  ?hidden=\"${!this.openTranscript}\"\n                  simpleFormat\n                  textType=\"pointContent\"\n                  .contentLanguage=\"${this.point.language}\"\n                  .content=\"${this.point.latestContent}\"\n                  .contentId=\"${this.point.id}\"\n                >\n                </yp-magic-text>\n              </div>\n            </div>\n          `\n        : nothing}\n    `;\n  }\n\n  renderEditPoint() {\n    return html`\n      <div class=\"layout vertical\">\n        <md-outlined-text-field\n          id=\"pointContentEditor\"\n          charCounter\n          maxlength=\"1500\"\n          .value=\"${this.editText ? this.editText : ''}\"\n        ></md-outlined-text-field>\n        <div class=\"horizontal end-justified layout\">\n          <yp-emoji-selector id=\"pointEmojiSelector\"></yp-emoji-selector>\n        </div>\n        <div class=\"layout horizontal self-end\">\n          <md-outlined-button\n            @click=\"${this._cancelEdit}\"\n            .label=\"${this.t('cancel')}\"\n          ></md-outlined-button>\n          <md-outlined-button\n            @click=\"${this._saveEdit}\"\n            .label=\"${this.t('update')}\"\n          ></md-outlined-button>\n        </div>\n      </div>\n    `;\n  }\n\n  renderEditMenu() {\n    return html`\n      <div class=\"layout horizontal self-end\" hidden>\n        <md-outlined-icon-button\n          .label=\"${this.t('editAdminComment')}\"\n          ?hidden=\"${!this.hasAdminCommentAccess}\"\n          icon=\"comment\"\n          @click=\"${this._editAdminComment}\"\n        ></md-outlined-icon-button>\n        <md-outlined-icon-button\n          .label=\"${this.t('edit')}\"\n          ?hidden=\"${!this.canEditPoint}\"\n          icon=\"create\"\n          @click=\"${this._editPoint}\"\n        ></md-outlined-icon-button>\n        <md-outlined-icon-button\n          .label=\"${this.t('delete')}\"\n          icon=\"clear\"\n          @click=\"${this._deletePoint}\"\n        ></md-outlined-icon-button>\n      </div>\n    `;\n  }\n  render() {\n    return html`\n      <div class=\"layout vertical\">\n        ${this.renderUserHeader()}\n\n        <div class=\"layout vertical\">\n          ${this.videoOrAudioActive\n            ? this.renderVideoOrAudio()\n            : this.renderTextPoint()}\n          ${this.showAdminComments ? this.renderAdminComments() : nothing}\n          ${this.isEditing ? this.renderEditPoint() : nothing}\n\n          <div\n            class=\"layout horizontal actionContainer\"\n            ?hidden=\"${this.hideActions}\"\n          >\n            <yp-point-actions\n              .point=\"${this.point}\"\n              .pointUrl=\"${this.pointUrl}\"\n              .configuration=\"${this.post?.Group?.configuration}\"\n            ></yp-point-actions>\n            <md-outlined-icon-button\n              hidden\n              .label=\"${this.t('point.report')}\"\n              id=\"reportPointIconButton\"\n              icon=\"warning\"\n              @click=\"${this._reportPoint}\"\n            ></md-outlined-icon-button>\n            <div class=\"flex\"></div>\n\n            ${this.hasPointAccess ? this.renderEditMenu() : nothing}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _setOpen() {\n    this.openTranscript = true;\n    setTimeout(() => {\n      this.fire('yp-list-resize');\n      this.requestUpdate();\n    }, 20);\n  }\n\n  _setClosed() {\n    this.openTranscript = false;\n    setTimeout(() => {\n      this.fire('yp-list-resize');\n      this.requestUpdate();\n    }, 20);\n  }\n\n  get isEditingSomething() {\n    return this.isEditing || this.isAdminCommentEditing;\n  }\n\n  get showAdminComments() {\n    if (\n      this.post &&\n      this.post.Group &&\n      this.point.public_data &&\n      this.point.public_data.admin_comment &&\n      this.point.public_data.admin_comment.text &&\n      this.post.Group.configuration &&\n      this.post.Group.configuration.allowAdminAnswersToPoints\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  get hasAdminCommentAccess() {\n    if (\n      this.post &&\n      this.post.Group &&\n      YpAccessHelpers.checkPostAdminOnlyAccess(this.post) &&\n      this.post.Group.configuration &&\n      this.post.Group.configuration.allowAdminAnswersToPoints\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  get videoOrAudioActive() {\n    return this.videoActive || this.audioActive;\n  }\n\n  _isEditingChanged() {\n    this._updateEmojiBindings();\n  }\n\n  _isAdminCommentEditingChanged() {\n    this._updateEmojiBindings();\n  }\n\n  _shareTap(event: CustomEvent) {\n    window.appGlobals.activity(\n      'pointShareOpen',\n      event.detail.brand,\n      this.point.id\n    );\n  }\n\n  get pointUrl() {\n    if (this.point && this.post) {\n      return (\n        window.location.protocol +\n        '//' +\n        window.location.hostname +\n        '/post/' +\n        this.post.id +\n        '/' +\n        this.point.id\n      );\n    }\n  }\n\n  _linkIfNeeded() {\n    if (this.linkPoint && this.post) {\n      YpNavHelpers.goToPost(this.post.id, this.point.id);\n    }\n  }\n\n  _updateEmojiBindings() {\n    if (this.isEditing) {\n      setTimeout(() => {\n        const point = this.$$('#pointContentEditor') as HTMLInputElement;\n        const emoji = this.$$('#pointEmojiSelector') as YpEmojiSelector;\n        if (point && emoji) {\n          emoji.inputTarget = point;\n        } else {\n          console.error(\"Wide: Can't bind point edit emojis :(\");\n        }\n      }, 500);\n    } else if (this.isAdminCommentEditing) {\n      setTimeout(() => {\n        const point = this.$$('#pointAdminCommentEditor') as HTMLInputElement;\n        const emoji = this.$$(\n          '#pointAdminCommentEmojiSelector'\n        ) as YpEmojiSelector;\n        if (point && emoji) {\n          emoji.inputTarget = point;\n        } else {\n          console.error(\"Wide: Can't bind point edit emojis :(\");\n        }\n      }, 500);\n    }\n  }\n\n  _cancelEdit() {\n    //this._setlatestContent(this.point);\n    this.isEditing = false;\n  }\n\n  async _saveEdit() {\n    const point = (await window.serverApi.updatePoint(this.point.id, {\n      content: this.editText,\n    })) as YpPointData;\n    if (point) {\n      point.latestContent = point.PointRevisions![\n        point.PointRevisions!.length - 1\n      ].content;\n      this.point = point;\n    }\n    this.isEditing = false;\n  }\n\n  _cancelAdminCommentEdit() {\n    //this._setlatestContent(this.point);\n    this.isAdminCommentEditing = false;\n  }\n\n  async _saveAdminCommentEdit() {\n    const response = await window.serverApi.updatePointAdminComment(\n      this.post.Group.id,\n      this.point.id,\n      {\n        content: this.editAdminCommentText,\n      }\n    );\n\n    if (response) {\n      if (!this.point.public_data) this.point.public_data = {};\n      this.point.public_data.admin_comment = {\n        text: response.content,\n      };\n      this.point = JSON.parse(JSON.stringify(this.point));\n      this.isAdminCommentEditing = false;\n      this.hasAdminComments = true;\n    }\n    this.isAdminCommentEditing = false;\n  }\n\n  _deletePoint() {\n    window.appDialogs.getDialogAsync(\n      'confirmationDialog',\n      (dialog: any /*YpConfirmationDialog*/) => {\n        dialog.open(\n          this.t('point.confirmDelete'),\n          this._reallyDeletePoint.bind(this)\n        );\n      }\n    );\n  }\n\n  async _reallyDeletePoint() {\n    await window.serverApi.deletePoint(this.point.id);\n\n    this.fire('yp-point-deleted', { pointId: this.point.id });\n    //TODO: Check if we need this\n    //this.point = undefined;\n  }\n\n  _reportPoint() {\n    window.appGlobals.activity('open', 'point.report');\n    window.appDialogs.getDialogAsync(\n      'apiActionDialog',\n      (dialog: any /*YpApiActionDialog*/) => {\n        dialog.setup(\n          '/api/points/' + this.point.id + '/report',\n          this.t('reportConfirmation'),\n          this._onReport.bind(this),\n          this.t('point.report'),\n          'PUT'\n        );\n        dialog.open();\n      }\n    );\n  }\n\n  _onReport() {\n    window.appGlobals.notifyUserViaToast(\n      this.t('point.report') + ': ' + this.point.content\n    );\n  }\n\n  _editPoint() {\n    if (this.hasPointAccess && this.point.PointRevisions) {\n      this.editText = this.point.PointRevisions[\n        this.point.PointRevisions.length - 1\n      ].content;\n      this.isEditing = true;\n    }\n  }\n\n  _editAdminComment() {\n    if (\n      this.post &&\n      YpAccessHelpers.checkPostAdminOnlyAccess(this.post)\n    ) {\n      this.editAdminCommentText =\n        this.point.public_data && this.point.public_data.admin_comment\n          ? this.point.public_data.admin_comment.text\n          : '';\n      this.isAdminCommentEditing = true;\n    }\n  }\n\n  get hasPointAccess() {\n    return YpAccessHelpers.checkPointAccess(this.point);\n  }\n\n  get canEditPoint() {\n    if (\n      this.point &&\n      ((this.point.PointVideos && this.point.PointVideos.length > 0) ||\n        (this.point.PointAudios && this.point.PointAudios.length > 0))\n    ) {\n      // Allow admin editing of transcripts\n      return YpAccessHelpers.checkPointAccess(this.point);\n    } else {\n      const isEligible =\n        this.point &&\n        this.point.counter_quality_up + this.point.counter_quality_down <=\n          this.maxNumberOfPointsBeforeEditFrozen;\n      return (\n        isEligible &&\n        window.appUser &&\n        window.appUser.user &&\n        this.point &&\n        window.appUser.user.id == this.point.user_id\n      );\n    }\n  }\n\n  firstUpdated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.firstUpdated(changedProperties);\n    //TODO: Remove unknown cast\n    YpMediaHelpers.attachMediaListeners(this as unknown as YpElementWithPlayback);\n  }\n\n  _pauseMediaPlayback() {\n    //TODO: Remove unknown cast\n    YpMediaHelpers.pauseMediaPlayback(this as unknown as YpElementWithPlayback);\n  }\n\n  _pointChanged() {\n    this._resetMedia();\n    if (this.point) {\n      if (\n        this.post &&\n        this.post.Group &&\n        this.post.Group.configuration &&\n        this.post.Group.configuration.collapsableTranscripts\n      ) {\n        this.openTranscript = false;\n      }\n      let disableMachineTranscripts = false;\n      if (\n        this.post &&\n        this.post.Group &&\n        this.post.Group.configuration &&\n        this.post.Group.configuration.disableMachineTranscripts\n      ) {\n        disableMachineTranscripts = true;\n      }\n      this.user = this.point.User;\n      const videoURL = YpMediaHelpers.getVideoURL(this.point.PointVideos);\n      const videoPosterURL = YpMediaHelpers.getVideoPosterURL(\n        this.point.PointVideos,\n        undefined\n      );\n      this.portraitVideo = YpMediaHelpers.isPortraitVideo(\n        this.point.PointVideos\n      );\n      if (videoURL && videoPosterURL) {\n        this.videoActive = true;\n        this.pointVideoPath = videoURL;\n        this.pointImageVideoPath = videoPosterURL;\n        this.pointVideoId = this.point.PointVideos![0].id;\n        this.checkTranscriptError = false;\n        if (!disableMachineTranscripts &&\n          this.point.checkTranscriptFor === 'video' &&\n          window.appGlobals.hasTranscriptSupport === true\n        ) {\n          this._checkTranscriptStatus();\n          this.checkingTranscript = true;\n          this.point.checkTranscriptFor = undefined;\n        }\n      } else {\n        const audioURL = YpMediaHelpers.getAudioURL(this.point.PointAudios);\n        if (audioURL) {\n          this.audioActive = true;\n          this.pointAudioPath = audioURL;\n          this.pointAudioId = this.point.PointAudios![0].id;\n          this.checkTranscriptError = false;\n          if (\n            !disableMachineTranscripts &&\n            this.point.checkTranscriptFor === 'audio' &&\n            window.appGlobals.hasTranscriptSupport === true\n          ) {\n            this._checkTranscriptStatus();\n            this.checkingTranscript = true;\n            this.point.checkTranscriptFor = undefined;\n          }\n        }\n      }\n    } else {\n      this.user = undefined;\n      this.checkTranscriptError = false;\n    }\n  }\n\n  async _checkTranscriptStatus() {\n    let type;\n    if (this.videoActive) type = 'videoTranscriptStatus';\n    else type = 'audioTranscriptStatus';\n\n    const pointInfo = (await window.serverApi.checkPointTranscriptStatus(\n      type,\n      this.point.id\n    )) as YpGetPointTranscriptResponse;\n    if (pointInfo.point) {\n      const point = pointInfo.point;\n      this.checkingTranscript = false;\n      point.latestContent = point.PointRevisions![\n        point.PointRevisions!.length - 1\n      ].content;\n      this.point = point;\n      this.fire('yp-update-point-in-list', point);\n      if (this.hasPointAccess) {\n        this.editText = point.latestContent;\n        this.isEditing = true;\n      }\n      this.requestUpdate();\n    } else if (pointInfo && pointInfo.inProgress) {\n      setTimeout(() => {\n        this._checkTranscriptStatus();\n      }, 2000);\n    } else if (pointInfo && pointInfo.error) {\n      this.checkingTranscript = false;\n      this.checkTranscriptError = true;\n    } else {\n      this.checkingTranscript = false;\n    }\n  }\n\n  _resetMedia() {\n    this.videoActive = false;\n    this.pointVideoPath = undefined;\n    this.pointImageVideoPath = undefined;\n    this.pointVideoId = undefined;\n    this.audioActive = false;\n    this.pointAudioPath = undefined;\n    this.pointAudioId = undefined;\n  }\n\n  loginName() {\n    if (this.point.User) {\n      return this.point.User.name;\n    }\n  }\n\n  get isUpVote() {\n    if (this.point) {\n      if (this.point.value == 0) {\n        return true;\n      } else {\n        return this.point.value > 0;\n      }\n    } else {\n      console.warn(\"Can't find point for isUpVote\");\n      return false;\n    }\n  }\n\n  get isDownVote() {\n    if (this.point) {\n      if (this.point.value == 0) {\n        return true;\n      } else {\n        return this.point.value < 0;\n      }\n    } else {\n      console.warn(\"Can't find point for isDownVote\");\n      return false;\n    }\n  }\n}\n"]}