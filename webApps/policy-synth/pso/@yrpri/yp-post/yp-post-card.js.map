{"version":3,"file":"yp-post-card.js","sourceRoot":"","sources":["../../../src/@yrpri/yp-post/yp-post-card.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\nimport { ShadowStyles } from '../common/ShadowStyles.js';\nimport { YpNavHelpers } from '../common/YpNavHelpers.js';\n\nimport '../yp-magic-text/yp-magic-text.js';\nimport './yp-post-cover-media.js';\nimport './yp-post-actions.js';\n\nimport './yp-post-tags.js';\n\nimport '@material/web/iconbutton/outlined-icon-button.js';\n\n@customElement('yp-post-card')\nexport class YpPostCard extends YpBaseElement {\n  @property({ type: String })\n  selectedMenuItem: string | undefined;\n\n  @property({ type: Boolean })\n  mini = false;\n\n  @property({ type: Boolean })\n  isAudioCover = false;\n\n  @property({ type: Object })\n  post!: YpPostData;\n\n  static get propersties() {\n    return {\n      post: {\n        type: Object,\n        observer: '_postChanged',\n      },\n    };\n  }\n\n  //TODO: Make corners on posts card different\n  static get styles() {\n    return [\n      super.styles,\n      ShadowStyles,\n      css`\n        .post-name {\n          margin: 0;\n          padding: 16px;\n          padding-top: 20px;\n          padding-bottom: 14px;\n          cursor: pointer;\n          vertical-align: middle !important;\n          font-size: 20px;\n          background-color: #fff;\n          color: #000;\n          font-weight: 500;\n        }\n\n        .post-name[largefont] {\n          font-size: 19px;\n        }\n\n        .postCardCursor {\n          cursor: pointer;\n        }\n\n        .postCard {\n          background-color: #fff;\n          width: 420px;\n        }\n\n        :host {\n          display: block;\n        }\n\n        .postCard {\n          width: 416px;\n          border-radius: 4px;\n        }\n\n        .postCard[hide-post-cover] {\n          height: 190px;\n        }\n\n        .postCard[hide-post-cover][hide-actions] {\n          height: 165px;\n        }\n\n        .postCard[hide-post-cover][hide-description] {\n          height: 140px;\n        }\n\n        .postCard[hide-description] {\n          height: 372px;\n        }\n\n        .postCard[hide-description][hide-actions] {\n          height: 331px;\n        }\n\n        .postCard[hide-description][hide-post-cover][hide-actions] {\n          height: 110px;\n        }\n\n        .postCard[hide-actions] {\n          height: 402px;\n        }\n\n        .postCard[mini] {\n          width: 210px;\n          height: 100%;\n          margin: 0;\n          padding-top: 0;\n          padding-bottom: 0;\n        }\n\n        yp-post-cover-media {\n          width: 416px;\n          height: 234px;\n        }\n\n        yp-post-cover-media[mini] {\n          width: 210px;\n          height: 118px;\n          min-height: 118px;\n        }\n\n        .post-name[mini] {\n          padding: 16px;\n        }\n\n        .description {\n          font-size: 17px;\n          padding: 16px;\n          padding-top: 0;\n          cursor: pointer;\n          color: #555;\n        }\n\n        .description[widetext] {\n          font-size: 16px;\n          line-height: 1.3;\n        }\n\n        .description[largefont] {\n          font-size: 15px;\n        }\n\n        .postActions {\n        }\n\n        .shareIcon {\n          position: absolute;\n          left: 8px;\n          bottom: 2px;\n          text-align: right;\n          width: 48px;\n          height: 48px;\n        }\n\n        .customRatings {\n          position: absolute;\n          bottom: 10px;\n          right: 6px;\n        }\n\n        :host {\n          width: 100%;\n        }\n\n        @media (max-width: 960px) {\n          .customRatings {\n            bottom: 12px;\n          }\n\n          :host {\n            width: 100%;\n            max-width: 423px;\n          }\n\n          .description[has-custom-ratings] {\n            padding-bottom: 28px;\n          }\n\n          .postCard {\n            margin-left: 0;\n            margin-right: 0;\n            padding-left: 0;\n            padding-right: 0;\n            width: 100%;\n            height: 100%;\n          }\n\n          .postCard[mini] {\n            width: 210px;\n            height: 100%;\n          }\n\n          .card {\n            margin-left: 0;\n            margin-right: 0;\n            padding-left: 0;\n            padding-right: 0;\n            width: 100%;\n            height: 100%;\n          }\n\n          .card[mini] {\n            width: 210px;\n            height: 100%;\n          }\n\n          yp-post-cover-media {\n            width: 100%;\n            height: 230px;\n          }\n\n          yp-post-cover-media[mini] {\n            width: 210px;\n            height: 118px;\n            min-height: 118px;\n          }\n\n          .card {\n            height: 100%;\n            padding-bottom: 48px;\n          }\n\n          .postCard {\n            height: 100% !important;\n          }\n\n          yp-post-cover-media[audio-cover] {\n            width: 100%;\n            height: 100px;\n          }\n        }\n\n        @media (max-width: 420px) {\n          yp-post-cover-media {\n            height: 225px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 100px;\n          }\n        }\n\n        @media (max-width: 375px) {\n          yp-post-cover-media {\n            height: 207px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 100px;\n          }\n        }\n\n        @media (max-width: 360px) {\n          yp-post-cover-media {\n            height: 200px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 90px;\n          }\n        }\n\n        @media (max-width: 320px) {\n          yp-post-cover-media {\n            height: 180px;\n          }\n          yp-post-cover-media[audio-cover] {\n            height: 90px;\n          }\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        a {\n          text-decoration: none;\n        }\n\n        .share[mini] {\n          display: none;\n        }\n      `,\n    ];\n  }\n\n  renderDescription() {\n    return html`\n      ${!this.post.public_data?.structuredAnswersJson\n        ? html`\n            <yp-magic-text\n              class=\"description layout horizontal\"\n              ?hasCustomRatings=\"${this.post.Group.configuration.customRatings}\"\n              ?hidden=\"${this.hideDescription}\"\n              textType=\"postContent\"\n              .contentLanguage=\"${this.post.language}\"\n              text-only\n              .content=\"${this.post.description}\"\n              .contentId=\"${this.post.id}\"\n              truncate=\"220\"\n            >\n            </yp-magic-text>\n          `\n        : html`\n            <yp-magic-text\n              id=\"description\"\n              textType=\"postContent\"\n              .contentLanguage=\"${this.post.language}\"\n              ?hidden=\"${this.hideDescription}\"\n              .content=\"${this.structuredAnswersFormatted}\"\n              .contentId=\"${this.post.id}\"\n              class=\"description\"\n              truncate=\"120\"\n            >\n            </yp-magic-text>\n          `}\n    `;\n  }\n\n  renderTags() {\n    return html` <yp-post-tags .post=\"${this.post}\"></yp-post-tags> `;\n  }\n\n  //TODO: Write a server side script to make sure Group.configuration is always there\n  render() {\n    return this.post\n      ? html`\n          <div class=\"layout vertical center-center\">\n            <div\n              ?mini=\"${this.mini}\"\n              .hide-post-cover=\"${this.post.Group.configuration.hidePostCover}\"\n              .hide-description=\"${this.post.Group.configuration\n                .hidePostDescription}\"\n              ?hide-actions=\"${this.post.Group.configuration\n                .hidePostActionsInGrid}\"\n              audio-cover=\"${this.isAudioCover}\"\n              class=\"card postCard layout vertical shadow-elevation-2dp shadow-transition\"\n              animated\n            >\n              <div class=\"layout vertical\">\n                <a\n                  href=\"${ifDefined(this._getPostLink(this.post))}\"\n                  @click=\"${this.goToPostIfNotHeader}\"\n                  id=\"mainArea\"\n                >\n                  <yp-post-cover-media\n                    ?mini=\"${this.mini}\"\n                    top-radius\n                    ?audioCover=\"${this.isAudioCover}\"\n                    .altTag=\"${this.post.name}\"\n                    .post=\"${this.post}\"\n                    ?hidden=\"${this.post.Group.configuration.hidePostCover}\"\n                  ></yp-post-cover-media>\n                  <div class=\"postNameContainer\">\n                    <div\n                      class=\"post-name\"\n                      ?mini=\"${this.mini}\"\n                      id=\"postName\"\n                      ?largeFont=\"${this.largeFont}\"\n                    >\n                      <yp-magic-text\n                        id=\"postNameMagicText\"\n                        textType=\"postName\"\n                        ?largeFont=\"${this.largeFont}\"\n                        .contentLanguage=\"${this.post.language}\"\n                        text-only\n                        .content=\"${this.post.name}\"\n                        .contentId=\"${this.post.id}\"\n                      >\n                      </yp-magic-text>\n                    </div>\n                  </div>\n                  ${this.post.Group.configuration?.usePostTagsForPostCards\n                    ? this.renderTags()\n                    : this.renderDescription()}\n                </a>\n                <div\n                  ?hidden=\"${this.post.Group.configuration\n                    .hidePostActionsInGrid}\"\n                  @click=\"${this._onBottomClick}\"\n                >\n                  ${!this.mini\n                    ? html`\n                        <div class=\"layout horizontal\">\n                          ${this.post.Group.configuration?.hideSharing\n                            ? nothing\n                            : html`\n                        <div class=\"share\">\n                          <md-outlined-icon-button\n                            icon=\"share\" .label=\"${this.t('post.shareInfo')}\"\n                            @click=\"${this._shareTap}\"></md-outlined-icon-button>\n                          </md-outlined-icon-button>\n                        </div>\n\n                        `}\n                          ${this.post.Group.configuration.customRatings\n                            ? html`\n                                <yp-post-ratings-info\n                                  class=\"customRatings\"\n                                  .post=\"${this.post}\"\n                                ></yp-post-ratings-info>\n                              `\n                            : html`\n                                <yp-post-actions\n                                  class=\"postActions\"\n                                  .post=\"${this.post}\"\n                                  .forceShowDebate=\"${this.post.Group\n                                    .configuration.forceShowDebateCountOnPost}\"\n                                  ?hidden=\"${this.mini}\"\n                                >\n                                </yp-post-actions>\n                              `}\n                        </div>\n                      `\n                    : nothing}\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n      : nothing;\n  }\n\n  _sharedContent(event: CustomEvent) {\n    const shareData = event.detail;\n    window.appGlobals.activity(\n      'postShared',\n      shareData.social,\n      this.post ? this.post.id : -1\n    );\n  }\n\n  get _fullPostUrl() {\n    return encodeURIComponent(\n      'https://' + window.location.host + '/post/' + this.post.id\n    );\n  }\n\n  get structuredAnswersFormatted(): string {\n    if (\n      this.post &&\n      this.post.public_data &&\n      this.post.public_data.structuredAnswersJson &&\n      this.post.Group.configuration &&\n      this.post.Group.configuration.structuredQuestionsJson\n    ) {\n      const questionHash: Record<string, YpStructuredQuestionData> = {};\n      let outText = '';\n      this.post.Group.configuration.structuredQuestionsJson.forEach(\n        question => {\n          if (question.uniqueId) {\n            questionHash[question.uniqueId] = question;\n          }\n        }\n      );\n\n      for (\n        let i = 0;\n        i < this.post.public_data.structuredAnswersJson.length;\n        i++\n      ) {\n        const answer = this.post.public_data.structuredAnswersJson[i];\n        if (answer && answer.value) {\n          const question = questionHash[answer.uniqueId];\n          if (question) {\n            outText += question.text + ': ';\n            outText += answer.value + ' ';\n          }\n          if (outText.length > 120) {\n            break;\n          }\n        }\n      }\n\n      return outText;\n    } else {\n      return '';\n    }\n  }\n\n  _onBottomClick(event: CustomEvent) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n  }\n\n  clickOnA() {\n    this.$$('#mainArea')?.click();\n  }\n\n  _getPostLink(post: YpPostData) {\n    if (post) {\n      if (\n        post.Group.configuration &&\n        post.Group.configuration.disablePostPageLink\n      ) {\n        return '#';\n      } else if (\n        post.Group.configuration &&\n        post.Group.configuration.resourceLibraryLinkMode\n      ) {\n        return post.description.trim();\n      } else {\n        return '/post/' + post.id;\n      }\n    } else {\n      console.warn('Trying to get empty post link');\n    }\n  }\n\n  _shareTap(event: CustomEvent) {\n    window.appGlobals.activity(\n      'postShareCardOpen',\n      event.detail.brand,\n      this.post ? this.post.id : -1\n    );\n\n    window.appDialogs.getDialogAsync(\n      'shareDialog',\n      (dialog: YpShareDialogData) => {\n        dialog.open(\n          this._fullPostUrl,\n          this.t('post.shareInfo'),\n          this._sharedContent\n        );\n      }\n    );\n  }\n\n  get hideDescription(): boolean {\n    return (this.mini ||\n      (this.post &&\n        this.post.Group.configuration &&\n        this.post.Group.configuration.hidePostDescription)) as boolean;\n  }\n\n  goToPostIfNotHeader(event: CustomEvent) {\n    event.preventDefault();\n\n    if (\n      this.post.Group.configuration &&\n      this.post.Group.configuration.disablePostPageLink\n    ) {\n      console.log('goToPostDisabled');\n    } else if (\n      this.post.Group.configuration &&\n      this.post.Group.configuration.resourceLibraryLinkMode\n    ) {\n      // Do nothing\n    } else {\n      YpNavHelpers.goToPost(this.post.id);\n    }\n\n    if (this.post && !this.mini) {\n      window.appGlobals.cache.cachedPostItem = this.post;\n    }\n  }\n\n  updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n    if (changedProperties.has('post') && this.post) {\n      if (this.post.cover_media_type === 'audio') {\n        this.isAudioCover = true;\n      } else {\n        this.isAudioCover = false;\n      }\n    }\n  }\n\n  updateDescriptionIfEmpty(description: string) {\n    if (!this.post.description || this.post.description == '') {\n      this.post.description = description;\n    }\n  }\n\n  _refresh() {\n    //TODO: Fix ts type\n    window.appDialogs.getDialogAsync(\n      'postEdit',\n      (dialog: { selected: number }) => {\n        dialog.selected = 0;\n        this.fire('refresh');\n      }\n    );\n  }\n\n  _openReport() {\n    window.appGlobals.activity('open', 'post.report');\n    //TODO: Fix ts type\n    window.appDialogs.getDialogAsync(\n      'apiActionDialog',\n      (dialog: {\n        setup: (\n          arg0: string,\n          arg1: string,\n          arg2: () => void,\n          arg3: string,\n          arg4: string\n        ) => void;\n        open: () => void;\n      }) => {\n        dialog.setup(\n          '/api/posts/' + this.post.id + '/report',\n          this.t('reportConfirmation'),\n          this._onReport.bind(this),\n          this.t('post.report'),\n          'PUT'\n        );\n        dialog.open();\n      }\n    );\n  }\n\n  _onReport() {\n    window.appGlobals.notifyUserViaToast(\n      this.t('post.report') + ': ' + this.post.name\n    );\n  }\n}\n"]}