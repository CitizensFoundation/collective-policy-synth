{"version":3,"file":"ac-activities.js","sourceRoot":"","sources":["../../../src/@yrpri/ac-activities/ac-activities.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement, state } from 'lit/decorators.js';\n\nimport '@material/web/button/outlined-button.js';\n//import '../yp-point/yp-point-news-story-edit.js';\n\nimport './ac-activity.js';\nimport './ac-activity-recommended-posts.js';\n\nimport '@lit-labs/virtualizer';\n\nimport { YpBaseElementWithLogin } from '../common/yp-base-element-with-login.js';\n//import { RangeChangedEvent } from '@lit-labs/virtualizer/Virtualizer.js';\nimport { LitVirtualizer } from '@lit-labs/virtualizer';\nimport { FlowLayout } from '@lit-labs/virtualizer/layouts/flow.js';\nimport { ShadowStyles } from '../common/ShadowStyles.js';\n//import { YpConfirmationDialog } from '../yp-dialog-container/yp-confirmation-dialog.js';\n\n@customElement('ac-activities')\nexport class AcActivities extends YpBaseElementWithLogin {\n  @property({ type: Boolean })\n  disableNewPosts = false;\n\n  @property({ type: Boolean })\n  noRecommendedPosts = true;\n\n  @property({ type: Boolean })\n  gotInitialData = false;\n\n  @property({ type: Array })\n  activities: Array<AcActivityData> | undefined;\n\n  @property({ type: Number })\n  domainId: number | undefined;\n\n  @property({ type: Number })\n  collectionId!: number;\n\n  @property({ type: String })\n  collectionType!: string;\n\n  @property({ type: Number })\n  communityId: number | undefined;\n\n  @property({ type: Number })\n  groupId: number | undefined;\n\n  @property({ type: Number })\n  postId: number | undefined;\n\n  @property({ type: Number })\n  postGroupId: number | undefined;\n\n  @property({ type: Number })\n  userId: number | undefined;\n\n  @property({ type: String })\n  mode: 'activities' | 'news_feeds' = 'activities';\n\n  @property({ type: String })\n  url: string | undefined;\n\n  @property({ type: Object })\n  latestProcessedActivityAt: string | undefined;\n\n  @property({ type: Object })\n  oldestProcessedActivityAt: string | undefined;\n\n  @property({ type: Number })\n  activityIdToDelete: number | undefined;\n\n  @property({ type: Array })\n  recommendedPosts: Array<YpPostData> | undefined;\n\n  @state() closeNewsfeedSubmissions = false\n\n  _moreToLoad = false;\n\n  updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('domainId')) {\n      this._domainIdChanged();\n    }\n\n    if (changedProperties.has('communityId')) {\n      this._communityIdChanged();\n    }\n\n    if (changedProperties.has('groupId')) {\n      this._groupIdChanged();\n    }\n\n    if (changedProperties.has('postId')) {\n      this._postIdChanged();\n    }\n\n    if (changedProperties.has('userId')) {\n      this._userIdChanged();\n    }\n  }\n\n  static get styles() {\n    return [\n      super.styles,\n      ShadowStyles,\n      css`\n        :host {\n          height: 100%;\n        }\n\n        lit-virtualizer {\n          height: 100vh;\n          width: 100vw;\n        }\n\n        .addNewsBox {\n          background-color: #fff;\n          width: 550px;\n          height: 100%;\n          padding-left: 16px;\n          padding-right: 16px;\n          margin-top: 16px;\n          margin-left: 16px;\n          margin-right: 16px;\n        }\n\n        @media (max-width: 600px) {\n          .addNewsBox {\n            width: 100%;\n            height: 100%;\n            margin-bottom: 8px;\n            margin-top: 8px;\n            margin-left: 0;\n            margin-right: 0;\n            width: -webkit-calc(100% - 16px);\n            width: -moz-calc(100% - 16px);\n            width: calc(100% - 16px);\n          }\n        }\n\n        @media (max-width: 340px) {\n          .addNewsBox {\n            width: 100%;\n            height: 100%;\n            margin-bottom: 8px;\n            margin-top: 8px;\n            margin-left: 0;\n            margin-right: 0;\n            width: -webkit-calc(100% - 36px);\n            width: -moz-calc(100% - 36px);\n            width: calc(100% - 36px);\n          }\n        }\n\n        .activityContainer {\n          width: 550px;\n          margin: 0;\n          padding: 0;\n        }\n\n        @media (max-width: 600px) {\n          .activityContainer {\n            width: 100%;\n          }\n        }\n\n        .recommendedPosts[not-active] {\n          display: none;\n        }\n\n        .recommendedPosts[small] {\n          display: none;\n        }\n\n        .mainActivityContent {\n          height: 100% !important;\n        }\n\n        .headerUserImage {\n          padding-top: 16px;\n        }\n\n        h1 {\n          font-size: 24px;\n        }\n\n        md-outlined-button {\n          color: var(--accent-color);\n        }\n\n        md-icon {\n          width: 48px;\n          height: 48px;\n          padding-top: 14px;\n        }\n\n        .createdAt {\n          color: #777;\n          margin-top: 16px;\n          font-size: 14px;\n        }\n\n        yp-ajax {\n          background-color: var(--primary-background-color);\n        }\n\n        .deleteIcon {\n          position: absolute;\n          right: 8px;\n          bottom: 8px;\n          color: #ddd;\n        }\n\n        .withCursor {\n          cursor: pointer;\n        }\n\n        @media (max-width: 960px) {\n          .recommendedPosts {\n            display: none !important;\n          }\n        }\n\n        .topLevelActivitiesContainer[wide] {\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        .spinnerContainer {\n          margin-top: 32px;\n        }\n\n        .topSpinnerContainer {\n          margin-top: 16px;\n        }\n\n        :focus {\n          outline: none;\n        }\n\n        .notLoggedInButton {\n          margin-top: 8px;\n          width: 250px;\n          background-color: #fff;\n          margin-bottom: 8px;\n          text-align: center;\n        }\n\n        .topLevelActivitiesContainer[rtl] {\n          direction: rtl;\n        }\n      `,\n    ];\n  }\n\n  renderItem(activity: AcActivityData, index: number) {\n    return html`\n    <div class=\"layout vertical center-center\" style=\"width: 100%;\">\n    <ac-activity\n        tabindex=\"${index}\"\n        .hasLoggedInUser=\"${this.isLoggedIn}\"\n        class=\"activityContainer\"\n        .activity=\"${activity}\"\n        .postId=\"${this.postId}\"\n        .groupId=\"${this.groupId}\"\n        .communityId=\"${this.communityId}\"\n        .domainId=\"${this.domainId}\"\n        @ak-delete-activity=\"${this._deleteActivity}\"></ac-activity>\n    </div>\n    `;\n  }\n\n  render() {\n    return html`\n      <div\n        class=\"layout horizontal topLevelActivitiesContainer center-center\"\n        wide=\"${this.wide}\"\n        ?rtl=\"${this.rtl}\">\n        <div class=\"layout vertical self-start center-center\">\n          ${this.loggedInUser\n            ? html`\n                <div\n                  .loggedInUser=\"${this.isLoggedIn}\"\n                  elevation=\"1\"\n                  ?hidden=\"${this.closeNewsfeedSubmissions || !this.activities}\"\n                  class=\"layout horizontal addNewsBox shadow-elevation-2dp shadow-transition\">\n                  <yp-point-news-story-edit\n                    .domainId=\"${this.domainId}\"\n                    .communityId=\"${this.communityId}\"\n                    .groupId=\"${this.groupId}\"\n                    .postGroupId=\"${this.postGroupId}\"\n                    .postId=\"${this.postId}\"\n                    @refresh=\"${this.loadNewData}\">\n                  </yp-point-news-story-edit>\n                </div>\n              `\n            : html`\n                <div class=\"layout vertical center-center\">\n                  <md-outlined-button\n                    raised\n                    class=\"layout horizontal notLoggedInButton\"\n                    .label=\"${this.t('loginToShareALink')}\"\n                    @click=\"${this._openLogin}\">\n                  </md-outlined-button>\n                </div>\n              `}\n          ${this.activities\n            ? html`\n                <lit-virtualizer\n                  id=\"list\"\n                  .items=${this.activities}\n                  .scrollTarget=\"${window}\"\n                  .layout=\"${FlowLayout}\"\n                  id=\"activitiesList\"\n                  .renderItem=${this.renderItem.bind(this)}\n                  @rangeChanged=${this.scrollEvent}></lit-virtualizer>\n              `\n            : nothing}\n        </div>\n\n        <div\n          class=\"layout vertical self-start recommendedPosts\"\n          ?notActive=\"${this.noRecommendedPosts}\"\n          small=\"${!this.wide}\"\n          ?hidden=\"${!this.recommendedPosts}\">\n          <ac-activity-recommended-posts\n            id=\"recommendedPosts\"\n            .recommendedPosts=\"${this.recommendedPosts}\"\n            class=\"layout vertical\"></ac-activity-recommended-posts>\n        </div>\n      </div>\n    `;\n  }\n\n  scrollEvent(event: any /*RangeChangedEvent*/) {\n    //TODO: Check this logic\n\n    if (\n      this.activities &&\n      this._moreToLoad &&\n      event.last != -1 &&\n      event.last < this.activities.length &&\n      event.last + 5 >= this.activities.length\n    ) {\n      this._moreToLoad = true;\n      this._loadMoreData();\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addListener('yp-point-deleted', this._pointDeleted);\n    this.addListener(\n      'yp-refresh-activities-scroll-threshold',\n      this._clearScrollThreshold\n    );\n\n    switch (this.collectionType) {\n      case 'domain':\n        this.domainId = this.collectionId;\n        break;\n      case 'community':\n        this.communityId = this.collectionId;\n        break;\n      case 'group':\n        this.groupId = this.collectionId;\n        break;\n      case 'post':\n        this.postId = this.collectionId;\n        break;\n      case 'user':\n        this.userId = this.collectionId;\n        break;\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeListener('yp-point-deleted', this._pointDeleted);\n    this.removeListener(\n      'yp-refresh-activities-scroll-threshold',\n      this._clearScrollThreshold\n    );\n  }\n\n  _openLogin() {\n    this.fire('yp-open-login');\n  }\n\n  _pointDeleted(event: CustomEvent) {\n    if (this.activities) {\n      for (let i = 0; i < this.activities.length; i++) {\n        if (this.activities[i].Point) {\n          if (this.activities[i].Point!.id == event.detail.pointId) {\n            this._removeActivityId(this.activities[i].id);\n          }\n        }\n      }\n    }\n  }\n\n  get wideListOffset() {\n    if (this.groupId) {\n      return '800';\n    } else {\n      return '415';\n    }\n  }\n\n  get ironListResizeScrollThreshold() {\n    if (this.wide) {\n      return 800;\n    } else {\n      return 300;\n    }\n  }\n\n  //TODO: Look into if this is needed\n  get ironListPaddingTop() {\n    let offset = (this.$$('#activitiesList') as HTMLElement).offsetTop;\n    offset -= 75;\n\n    if (!this.isLoggedIn && !this.groupId) offset -= 75;\n\n    if (offset > 0) {\n      console.info('News scroll offset: ' + offset);\n      return offset;\n    } else {\n      if (this.groupId) {\n        if (this.wide) {\n          offset = this.isLoggedIn ? 700 : 580;\n        } else {\n          offset = this.isLoggedIn ? 950 : 690;\n        }\n      } else {\n        if (this.wide) {\n          offset = this.isLoggedIn ? 600 : 400;\n        } else {\n          offset = this.isLoggedIn ? 700 : 610;\n        }\n      }\n      console.info('News (manual) scroll offset: ' + offset);\n      return offset;\n    }\n  }\n\n  //TODO: See what this is and if its needed\n  /*get skipIronListWidth() {\n    if (this.wide) {\n      const list = this.$$(\"#activitiesList\");\n      list.style.width = '600px';\n      list.updateViewportBoundaries();\n      setTimeout( () => {\n        list.notifyResize();\n      }, 50);\n    }\n    return this.wide;\n  }*/\n\n  _activityDeletedResponse(event: CustomEvent) {\n    this._removeActivityId(event.detail.response.activityId);\n  }\n\n  _removeActivityId(activityId: number) {\n    if (this.activities) {\n      for (let i = 0; i < this.activities.length; i++) {\n        if (this.activities[i].id == activityId) {\n          this.activities.splice(i, 1);\n        }\n      }\n    }\n    //TODO: See if this needed\n    //this.$$(\"#activitiesList\").fire(\"iron-resize\");\n  }\n\n  _deleteActivity(event: CustomEvent) {\n    this.activityIdToDelete = event.detail.id;\n    window.appDialogs.getDialogAsync(\n      'confirmationDialog',\n      (dialog: any /*YpConfirmationDialog*/) => {\n        dialog.open(\n          this.t('activity.confirmDelete'),\n          this._reallyDelete.bind(this)\n        );\n      }\n    );\n  }\n\n  async _reallyDelete() {\n    let type, collectionId;\n    if (this.domainId) {\n      type = 'domains';\n      collectionId = this.domainId;\n    } else if (this.communityId) {\n      type = 'communities';\n      collectionId = this.communityId;\n    } else if (this.groupId) {\n      type = 'groups';\n      collectionId = this.groupId;\n    } else if (this.postId) {\n      type = 'posts';\n      collectionId = this.postId;\n    } else if (this.userId) {\n      type = 'users';\n      collectionId = this.postId;\n    }\n\n    if (type && collectionId && this.activityIdToDelete) {\n      await window.serverApi.deleteActivity(\n        type,\n        collectionId,\n        this.activityIdToDelete\n      );\n      this.activityIdToDelete = undefined;\n    } else {\n      console.error('No activity found to delete');\n    }\n  }\n\n  _generateRequest(typeId: number, typeName: string) {\n    if (typeId) {\n      this.oldestProcessedActivityAt = undefined;\n      this.noRecommendedPosts = true;\n      this._moreToLoad = true;\n      //TODO: Add a minimum threshold of filtering before enabling dynamic news_feeds again\n      if (window.appUser && window.appUser.user && !this.postId) {\n        this.mode = 'activities';\n        //this.mode = 'news_feeds';\n      } else {\n        this.mode = 'activities';\n      }\n\n      this.url = '/api/' + this.mode + '/' + typeName + '/' + typeId;\n\n      this._loadMoreData();\n\n      if (typeName != 'posts') {\n        this._getRecommendations(typeName, typeId);\n      }\n    }\n  }\n\n  async _loadMoreData() {\n    if (this.url && this._moreToLoad) {\n      this._moreToLoad = false;\n      let url = this.url;\n      if (this.oldestProcessedActivityAt)\n        url += '?beforeDate=' + this.oldestProcessedActivityAt;\n      const response = (await window.serverApi.getAcActivities(\n        url\n      )) as AcActivitiesResponse;\n      this._processResponse(response);\n    } else {\n      console.warn('Trying to load more activities without conditions');\n    }\n  }\n\n  async loadNewData() {\n    if (this.url && this.latestProcessedActivityAt) {\n      let url = this.url;\n      if (this.oldestProcessedActivityAt)\n        url = url + '?afterDate=' + this.latestProcessedActivityAt;\n      this._processResponse(\n        (await window.serverApi.getAcActivities(url)) as AcActivitiesResponse\n      );\n    } else if (this.url && !this.latestProcessedActivityAt) {\n      this._processResponse(\n        (await window.serverApi.getAcActivities(\n          this.url\n        )) as AcActivitiesResponse\n      );\n    }\n  }\n\n  _domainIdChanged() {\n    if (this.domainId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.domainId, 'domains');\n    }\n  }\n\n  _communityIdChanged() {\n    if (this.communityId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.communityId, 'communities');\n    }\n  }\n\n  _groupIdChanged() {\n    if (this.groupId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.groupId, 'groups');\n    }\n  }\n\n  _postIdChanged() {\n    if (this.postId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.postId, 'posts');\n    }\n  }\n\n  _userIdChanged() {\n    if (this.userId) {\n      this.activities = undefined;\n      this.recommendedPosts = undefined;\n      this._generateRequest(this.userId, 'users');\n    }\n  }\n\n  _clearScrollThreshold() {\n    //TODO: Do we need this?\n    //this.$$(\"#scrollTheshold\").clearTriggers();\n  }\n\n  async _getRecommendations(typeName: string, typeId: number) {\n    let allowRecommendations = true;\n    if (this.activities && this.activities.length > 0) {\n      if (\n        this.activities[0].Group &&\n        this.activities[0].Group.configuration &&\n        this.activities[0].Group.configuration.hideRecommendationOnNewsFeed\n      ) {\n        allowRecommendations = false;\n      }\n      if (\n        this.activities[0].Community &&\n        this.activities[0].Community.configuration &&\n        this.activities[0].Community.configuration.hideRecommendationOnNewsFeed\n      ) {\n        allowRecommendations = false;\n      }\n    }\n    if (allowRecommendations) {\n      this.recommendedPosts = await window.serverApi.getRecommendations(\n        typeName,\n        typeId\n      );\n      this.noRecommendedPosts = false;\n    } else {\n      this.noRecommendedPosts = true;\n    }\n  }\n\n  _preProcessActivities(activities: Array<AcActivityData>) {\n    for (let i = 0; i < activities.length; i++) {\n      if (activities[i].Point) {\n        activities[i].Point!.latestContent = activities[\n          i\n        ].Point!.PointRevisions![\n          activities[i].Point!.PointRevisions!.length - 1\n        ].content;\n      }\n    }\n    return activities;\n  }\n\n  _processResponse(activitiesResponse: AcActivitiesResponse) {\n    const activities = this._preProcessActivities(\n      activitiesResponse.activities\n    );\n\n    this.gotInitialData = true;\n\n    if (activitiesResponse.oldestProcessedActivityAt) {\n      this.oldestProcessedActivityAt =\n        activitiesResponse.oldestProcessedActivityAt;\n    } else {\n      console.warn('Have not set oldestProcessedActivityAt');\n    }\n\n    if (this.activities) {\n      for (let i = 0; i < activities.length; i++) {\n        if (this.url!.indexOf('afterDate') > -1) {\n          this.activities.unshift(activities[i]);\n        } else {\n          this.activities.push(activities[i]);\n        }\n      }\n    } else {\n      this.activities = activities;\n    }\n\n    if (activities && activities.length > 0) {\n      if (\n        !this.latestProcessedActivityAt ||\n        this.latestProcessedActivityAt < activities[0].created_at\n      ) {\n        this.latestProcessedActivityAt = activities[0].created_at;\n      }\n      if (!this.latestProcessedActivityAt) {\n        console.error('Have not set latest processed activity at');\n      }\n      this._moreToLoad = true;\n      if (\n        this.activities.length < 15 ||\n        (activities.length < 3 && this.activities.length < 100)\n      ) {\n        this._loadMoreData();\n      }\n    }\n\n    this.fireGlobal('yp-refresh-activities-scroll-threshold', {});\n\n    setTimeout(() => {\n      //TODO: Check out\n      //this.$$(\"#activitiesList\").fire('iron-resize');\n    });\n\n    this.closeNewsfeedSubmissions = false;\n\n    if (this.activities && this.activities.length>0) {\n      if (this.activities[0].Group &&\n          this.activities[0].Group.configuration &&\n          this.activities[0].Group.configuration.closeNewsfeedSubmissions) {\n          this.closeNewsfeedSubmissions = true;\n      } else if (this.activities[0].Community &&\n          this.activities[0].Community.configuration &&\n          this.activities[0].Community.configuration.closeNewsfeedSubmissions) {\n          this.closeNewsfeedSubmissions = true;\n      }\n    }\n  }\n\n  scrollToItem(item: AcActivityData) {\n    console.log('Activity scrolling to item');\n    if (item && this.activities) {\n      for (let i = 0; i < this.activities.length; i++) {\n        if (this.activities[i] == item) {\n          (this.$$('#list') as LitVirtualizer).scrollToIndex(i);\n          break;\n        }\n      }\n    }\n    //      this.fireGlobal('yp-refresh-activities-scroll-threshold');\n    //TODO: Get workgin\n    //(this.$$('#activitiesList') as LitVirtualizer).scrollToItem(item);\n  }\n\n  fireResize() {\n    console.log('fireResize');\n    //TODO: Is this needed\n    //this.$$(\"#activitiesList\").fire('iron-resize');\n  }\n}\n"]}