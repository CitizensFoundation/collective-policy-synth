{"version":3,"file":"yp-app-nav-drawer.js","sourceRoot":"","sources":["../../../src/@yrpri/yp-app/yp-app-nav-drawer.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, nothing } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\n\nimport '@material/md-outlined-button';\nimport '@material/md-icon';\nimport '@material/mwc-linear-progress';\n\nimport './yp-language-selector.js';\n\nimport { YpNavHelpers } from '../common/YpNavHelpers.js';\n\n@customElement('yp-app-nav-drawer')\nexport class YpAppNavDrawer extends YpBaseElement {\n  @property({ type: Object })\n  homeLink: YpHomeLinkData | undefined;\n\n  @property({ type: Object })\n  user: YpUserData | undefined;\n\n  @property({ type: Boolean })\n  opened = false;\n\n  @property({ type: Boolean })\n  spinner = false;\n\n  @property({ type: String })\n  route: string | undefined;\n\n  @property({ type: Array })\n  myAdminGroups: YpGroupData[] | undefined;\n\n  @property({ type: Array })\n  myAdminCommunities: YpCommunityData[] | undefined;\n\n  @property({ type: Array })\n  myGroups: YpGroupData[] | undefined;\n\n  @property({ type: Array })\n  myCommunities: YpCommunityData[] | undefined;\n\n  @property({ type: Array })\n  myDomains: YpDomainData[] | undefined;\n\n  @property({ type: Object })\n  adminRights: YpAdminRights | undefined;\n\n  @property({ type: Object })\n  memberships: YpMemberships | undefined;\n\n  updated(changedProperties: Map<string | number | symbol, unknown>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('user')) {\n      this._userChanged();\n    }\n\n    if (changedProperties.has('opened')) {\n      this._openChanged();\n    }\n  }\n\n  async _openChanged() {\n    if (this.opened === true) {\n      this.spinner = true;\n      this.adminRights = await window.serverApi.getAdminRightsWithNames();\n      this.memberships = await window.serverApi.getMembershipsWithNames();\n      this.spinner = false;\n      this._reset();\n    }\n  }\n\n  _selectedLocale() {\n    return this.language;\n  }\n\n  _goBack() {\n    if (this.homeLink) {\n      YpNavHelpers.redirectTo(\n        '/' + this.homeLink.type + '/' + this.homeLink.id\n      );\n      this.fire('yp-toggle-nav-drawer');\n    }\n  }\n\n  _goToGroup(event: CustomEvent) {\n    YpNavHelpers.redirectTo(\n      '/group/' + (event.target as HTMLElement).getAttribute('data-args')\n    );\n    this.fire('yp-toggle-nav-drawer');\n  }\n\n  _goToCommunity(event: CustomEvent) {\n    YpNavHelpers.redirectTo(\n      '/community/' + (event.target as HTMLElement).getAttribute('data-args')\n    );\n    this.fire('yp-toggle-nav-drawer');\n  }\n\n  _goToDomain(event: CustomEvent) {\n    YpNavHelpers.redirectTo(\n      '/domain/' + (event.target as HTMLElement).getAttribute('data-args')\n    );\n    this.fire('yp-toggle-nav-drawer');\n  }\n\n  _userChanged() {\n    if (this.user) {\n      this._reset();\n    }\n  }\n\n  _reset() {\n    if (this.memberships) {\n      const groupUsers = this.memberships.GroupUsers.filter(item => {\n        return item.name != 'hidden_public_group_for_domain_level_points';\n      });\n      this.myGroups = groupUsers.slice(0, 1000) as YpGroupData[];\n      this.myCommunities = this.memberships.CommunityUsers.slice(\n        0,\n        500\n      ) as YpCommunityData[];\n      this.myDomains = this.memberships.DomainUsers.slice(\n        0,\n        3\n      ) as YpDomainData[];\n    } else {\n      this.myGroups = undefined;\n      this.myCommunities = undefined;\n      this.myDomains = undefined;\n    }\n\n    if (\n      this.adminRights &&\n      this.adminRights.CommunityAdmins &&\n      this.adminRights.CommunityAdmins.length > 0\n    ) {\n      this.myAdminCommunities = this.adminRights\n        .CommunityAdmins as YpCommunityData[];\n    } else {\n      this.myAdminCommunities = undefined;\n    }\n\n    if (\n      this.adminRights &&\n      this.adminRights.GroupAdmins &&\n      this.adminRights.GroupAdmins.length > 0\n    ) {\n      const groupAdmins = this.adminRights.GroupAdmins.filter(item => {\n        return item.name != 'hidden_public_group_for_domain_level_points';\n      });\n      this.myAdminGroups = groupAdmins as YpGroupData[];\n    } else {\n      this.myAdminGroups = undefined;\n    }\n  }\n\n  static get styles() {\n    return [\n      super.styles,\n      css`\n        .header {\n          padding-top: 16px;\n          font-weight: bold;\n          padding-bottom: 8px;\n          font-size: 18px;\n          padding-left: 8px;\n        }\n\n        .thumbNail {\n          width: 42px;\n          height: 24px;\n          padding-top: 24px;\n          margin-left: 12px;\n        }\n\n        .material {\n          background-color: #fff;\n          color: var(--primary-color-800);\n        }\n\n        .item {\n          cursor: pointer;\n          padding: 8px;\n        }\n\n        md-icon {\n          width: 42px;\n          height: 42px;\n          cursor: pointer;\n        }\n\n        .languageSelector {\n          margin-left: 8px;\n          margin-right: 8px;\n        }\n\n        yp-language-selector {\n          padding-top: 0;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      `,\n    ];\n  }\n\n  render() {\n    return html`\n      <div class=\"material\">\n        ${this.homeLink\n          ? html`\n              <div class=\"header layout vertical center-center\">\n                <md-icon icon=\"home\" @click=\"${this._goBack}\"></md-icon>\n                <div role=\"button\" @click=\"${this._goBack}\">\n                  ${this.homeLink.name}\n                </div>\n              </div>\n            `\n          : nothing}\n        <div class=\"languageSelector layout vertical self-start\">\n          <yp-language-selector\n            class=\"languageSelector\"\n            selected-locale=\"{{selectedLocale}}\"\n          ></yp-language-selector>\n        </div>\n\n        ${this.spinner\n          ? html`<mwc-linear-progress indeterminate></mwc-linear-progress>`\n          : nothing}\n\n        <div\n          class=\"layout vertical\"\n          role=\"navigation\"\n          aria-label=\"Community & Group navigation\"\n        >\n          ${this.myAdminCommunities\n            ? html`\n                <div class=\"header\">${this.t('myAdminCommunities')}</div>\n                ${this.myAdminCommunities.map(\n                  community => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${community.id}\"\n                        @click=\"${this._goToCommunity}\"\n                      >\n                        ${community.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n          ${this.myAdminGroups\n            ? html`\n                <div class=\"header\">${this.t('myAdminGroups')}</div>\n                ${this.myAdminGroups.map(\n                  group => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${group.id}\"\n                        @click=\"${this._goToGroup}\"\n                      >\n                        ${group.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n          ${this.myCommunities\n            ? html`\n                <div class=\"header\">${this.t('myCommunities')}</div>\n                ${this.myCommunities.map(\n                  community => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${community.id}\"\n                        @click=\"${this._goToCommunity}\"\n                      >\n                        ${community.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n          ${this.myGroups\n            ? html`\n                <div class=\"header\">${this.t('myGroups')}</div>\n                ${this.myGroups.map(\n                  group => html`\n                    <div class=\"layout horizontal\">\n                      <div\n                        role=\"button\"\n                        class=\"item\"\n                        data-args=\"${group.id}\"\n                        @click=\"${this._goToGroup}\"\n                      >\n                        ${group.name}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : nothing}\n        </div>\n      </div>\n    `;\n  }\n}\n"]}