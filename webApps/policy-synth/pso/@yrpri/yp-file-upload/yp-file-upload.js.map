{"version":3,"file":"yp-file-upload.js","sourceRoot":"","sources":["../../../src/@yrpri/yp-file-upload/yp-file-upload.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n@license\nCopyright (c) 2015 Winston Howes. All rights reserved.\nCopyright (c) 2016-2021 Citizens Foundation.\nThis code may only be used under the MIT license found at https://github.com/winhowes/file-upload/blob/master/LICENSE\n*/\n/**\nAn element providing a solution to no problem in particular.\n\nExample:\n\n    <file-upload target=\"/path/to/destination\"></file-upload>\n*/\n\nimport { html, css, nothing } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport '@material/mwc-linear-progress';\nimport '@material/web/icon/icon.js';\nimport '@material/web/iconbutton/outlined-icon-button.js';\nimport '@material/web/button/outlined-button.js'\n\n//import '../yp-post/yp-posts-list.js';\nimport '../common/yp-emoji-selector.js';\n//import '../yp-post/yp-post-card-add.js';\nimport './yp-set-video-cover.js';\n\nimport { YpBaseElement } from '../common/yp-base-element.js';\n//import { YpMediaRecorder } from '../yp-media-recorder/yp-media-recorder.js';\n\n@customElement('yp-file-upload')\nexport class YpFileUpload extends YpBaseElement {\n  /**\n   * `target` is the target url to upload the files to.\n   * Additionally by adding \"<name>\" in your url, it will be replaced by\n   * the file name.\n   */\n  @property({ type: String })\n  target = '';\n\n  @property({ type: Number })\n  uploadLimitSeconds: number | undefined;\n\n  /**\n   * `progressHidden` indicates whether or not the progress bar should be hidden.\n   */\n  @property({ type: Boolean })\n  progressHidden = false;\n\n  /**\n   * `droppable` indicates whether or not to allow file drop.\n   */\n  @property({ type: Boolean })\n  droppable = false;\n\n  /**\n   * `dropText` is the  text to display in the file drop area.\n   */\n  @property({ type: String })\n  dropText = '';\n\n  /**\n   * `multi` indicates whether or not to allow multiple files to be uploaded.\n   */\n  @property({ type: Boolean })\n  multi = false;\n\n  /**\n   * `files` is the list of files to be uploaded\n   */\n  @property({ type: Array })\n  files: Array<YpUploadFileData> = [];\n\n  /**\n   * `method` is the http method to be used during upload\n   */\n  @property({ type: String })\n  method = 'PUT';\n\n  /**\n   * `raised` indicates whether or not the button should be raised\n   */\n  @property({ type: Boolean })\n  raised = false;\n\n  @property({ type: String })\n  subText: string | undefined;\n\n  /**\n   * `noink` indicates that the button should not have an ink effect\n   */\n  @property({ type: Boolean })\n  noink = false;\n\n  /**\n   * `headers` is a key value map of header names and values\n   */\n  @property({ type: Object })\n  headers: Record<string, string> = {};\n\n  /**\n   * `retryText` is the text for the tooltip to retry an upload\n   */\n  @property({ type: String })\n  retryText = 'Retry Upload';\n\n  /**\n   * `removeText` is the text for the tooltip to remove an upload\n   */\n  @property({ type: String })\n  removeText = 'Remove';\n\n  /**\n   * `successText` is the text for the tooltip of a successful upload\n   */\n  @property({ type: String })\n  successText = 'Success';\n\n  /**\n   * `errorText` is the text to display for a failed upload\n   */\n  @property({ type: String })\n  errorText = 'Error uploading file...';\n\n  @property({ type: Boolean })\n  noDefaultCoverImage = false;\n\n  /**\n   * `shownDropText` indicates whether or not the drop text should be shown\n   */\n  @property({ type: Boolean })\n  shownDropText = false;\n\n  @property({ type: Boolean })\n  videoUpload = false;\n\n  @property({ type: Boolean })\n  audioUpload = false;\n\n  @property({ type: Boolean })\n  attachmentUpload = false;\n\n  @property({ type: Number })\n  currentVideoId: number | undefined;\n\n  @property({ type: Number })\n  currentAudioId: number | undefined;\n\n  @property({ type: Number })\n  transcodingJobId: number | undefined;\n\n  @property({ type: Boolean })\n  transcodingComplete = false;\n\n  @property({ type: Object })\n  currentFile: YpUploadFileData | undefined;\n\n  @property({ type: Boolean })\n  isPollingForTranscoding = false;\n\n  @property({ type: Boolean })\n  indeterminateProgress = false;\n\n  @property({ type: String })\n  uploadStatus: string | undefined;\n\n  @property({ type: String })\n  accept = 'image/*';\n\n  @property({ type: Object })\n  group: YpGroupData | undefined;\n\n  @property({ type: Boolean })\n  capture = false;\n\n  @property({ type: String })\n  containerType: string | undefined;\n\n  @property({ type: Number })\n  selectedVideoCoverIndex = 0;\n\n  @property({ type: Boolean })\n  videoAspect: string | undefined;\n\n  @property({ type: Boolean })\n  useMainPhotoForVideoCover = false;\n\n  @property({ type: String })\n  buttonText = '';\n\n  @property({ type: String })\n  buttonIcon = 'file_upload';\n\n  static get styles() {\n    return [\n      super.styles,\n      css`\n        .enabled {\n          border: 1px dashed #555;\n        }\n\n        .hover {\n          opacity: 0.7;\n          border: 1px dashed #111;\n        }\n\n        #UploadBorder {\n          vertical-align: middle;\n          color: #555;\n          padding: 8px;\n          padding-right: 16px;\n          max-height: 200px;\n          overflow-y: auto;\n          display: inline-block;\n        }\n\n        #dropArea {\n          text-align: center;\n        }\n\n        md-outlined-button {\n          margin-bottom: 8px;\n        }\n\n        .file {\n          padding: 10px 0px;\n        }\n\n        .commands {\n          float: right;\n        }\n\n        .commands iron-icon:not([icon='check-circle']) {\n          cursor: pointer;\n          opacity: 0.9;\n        }\n\n        .commands iron-icon:hover {\n          opacity: 1;\n        }\n\n        [hidden] {\n          display: none;\n        }\n\n        .error {\n          color: #f40303;\n          font-size: 11px;\n          margin: 2px 0px -3px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n        ::slotted(iron-icon) {\n          padding-right: 6px;\n        }\n\n        .mainContainer {\n          width: 100%;\n        }\n\n        .removeButton {\n          margin-bottom: 18px;\n        }\n\n        .limitInfo {\n          margin-top: 0;\n          color: #656565;\n          text-align: center;\n          font-size: 14px;\n        }\n\n        md-outlined-button {\n          min-width: 100px;\n        }\n\n        .subText {\n          font-size: 12px;\n          font-style: italic;\n        }\n      `,\n    ];\n  }\n\n  render() {\n    return html`\n\n      <div class=\"layout vertical center-center mainContainer\">\n        <div class=\"layout vertical center-center\">\n          <div class=\"layout horizontal center-center\">\n            <md-outlined-button\n              id=\"button\"\n              .icon=\"${this.buttonIcon}\"\n              class=\"blue\"\n              ?raised=\"${this.raised}\"\n              .label=\"${this.buttonText}\"\n              @click=\"${this._fileClick}\">\n            </md-outlined-button>\n            <md-outlined-icon-button\n              .ariaLabel=\"${this.t('deleteFile')}\"\n              class=\"removeButton layout self-start\"\n              icon=\"delete\"\n              @click=\"${this.clear}\"\n              ?hidden=\"${!this.currentFile}\"></md-outlined-icon-button>\n          </div>\n          <div class=\"subText\" ?hidden=\"${!this.subText}\">${this.subText}</div>\n          <div\n            ?hidden=\"${!this.uploadLimitSeconds}\"\n            class=\"limitInfo layout horizontal center-center\">\n            <em ?hidden=\"${this.currentFile != null}\"\n              >${this.uploadLimitSeconds} ${this.t('seconds')}</em\n            >\n          </div>\n        </div>\n        <div id=\"UploadBorder\">\n          ${this.files.map(\n            item => html`\n              <div class=\"file\">\n                <div class=\"name\">\n                  <span>${this.uploadStatus}</span>\n                  <div class=\"commands\">\n                    <md-icon\n                      .title=\"${this.retryText}\"\n                      @click=\"${this._retryUpload}\"\n                      ?hidden=\"${!item.error}\"\n                      >autorenew</md-icon\n                    >\n                    <md-icon\n                      icon=\"cancel\"\n                      .title=\"${this.removeText}\"\n                      @click=\"${this._cancelUpload}\"\n                      ?hidden=\"${item.complete}\"\n                      >cancel</md-icon\n                    >\n                    <md-icon\n                      icon=\"check_circle\"\n                      .title=\"${this.successText}\"\n                      ?hidden=\"${!item.complete}\"\n                      >check_circle</md-icon\n                    >\n                  </div>\n                </div>\n                <div class=\"error\" ?hidden=\"${!item.error}\">\n                  ${this.errorText}\n                </div>\n                <div ?hidden=\"${item.complete}\">\n                  <mwc-linear-progress\n                    .value=\"${item.progress}\"\n                    ?indeterminate=\"${this.indeterminateProgress}\"\n                    .error=\"${item.error}\"></mwc-linear-progress>\n                </div>\n              </div>\n            `\n          )}\n        </div>\n        ${this.currentVideoId && this.transcodingComplete\n          ? html`<yp-set-video-cover\n              .noDefaultCoverImage=\"${this.noDefaultCoverImage}\"\n              .videoId=\"${this.currentVideoId}\"\n              @set-cover=\"${this._setVideoCover}\"\n              @set-default-cover=\"${this\n                ._setDefaultImageAsVideoCover}\"></yp-set-video-cover> `\n          : nothing}\n      </div>\n      <input\n        type=\"file\"\n        id=\"fileInput\"\n        ?capture=\"${this.capture}\"\n        @change=\"${this._fileChange}\"\n        .accept=\"${this.accept}\"\n        hidden\n        ?multiple=\"${this.multi}\" />\n    `;\n  }\n\n  /**\n   * Fired when a response is received status code 200.\n   *\n   * @event success\n   */\n  /**\n   * Fired when a response is received other status code.\n   *\n   * @event error\n   */\n  /**\n   * Fired when a file is about to be uploaded.\n   *\n   * @event before-upload\n   */\n\n  /**\n   * Clears the list of files\n   */\n  clear() {\n    this.files = [];\n    this._showDropText();\n    this.uploadStatus = undefined;\n    this.currentVideoId = undefined;\n    this.currentAudioId = undefined;\n    this.currentFile = undefined;\n    this.transcodingJobId = undefined;\n    this.indeterminateProgress = false;\n    this.transcodingComplete = false;\n    this.capture = false;\n    this.isPollingForTranscoding = false;\n    this.useMainPhotoForVideoCover = false;\n\n    const fileInput = this.$$('#fileInput') as HTMLInputElement;\n    if (fileInput) fileInput.value = '';\n    if (this.videoUpload) this.fire('success', { detail: null, videoId: null });\n    else if (this.audioUpload)\n      this.fire('success', { detail: null, audioId: null });\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.raised) {\n      this.$$('#button')?.toggleAttribute('raised', true);\n    }\n    if (this.droppable) {\n      this._showDropText();\n      this.setupDrop();\n    }\n    if (this.videoUpload) {\n      this.accept = 'video/*';\n      this.capture = true;\n    } else if (this.audioUpload) {\n      this.accept = 'audio/*';\n      this.capture = true;\n    }\n\n    if (!this.uploadLimitSeconds && (this.videoUpload || this.audioUpload)) {\n      this.uploadLimitSeconds = 600;\n    }\n  }\n\n  /**\n   * A function to set up a drop area for drag-and-drop file uploads\n   */\n  setupDrop() {\n    const uploadBorder = this.$$('#UploadBorder');\n    //this.toggleClass('enabled', true, uploadBorder);\n\n    this.ondragover = e => {\n      e.stopPropagation();\n      //this.toggleClass('hover', true, uploadBorder);\n      return false;\n    };\n\n    this.ondragleave = () => {\n      //this.toggleClass('hover', false, uploadBorder);\n      return false;\n    };\n\n    this.ondrop = event => {\n      //this.toggleClass('hover', false, uploadBorder);\n      event.preventDefault();\n      if (event.dataTransfer) {\n        const length = event.dataTransfer.files.length;\n        for (let i = 0; i < length; i++) {\n          const file = event.dataTransfer.files[i] as YpUploadFileData;\n          file.progress = 0;\n          file.error = false;\n          file.complete = false;\n          this.files.push(file);\n          this.uploadFile(file);\n        }\n      }\n    };\n  }\n\n  _hasRecorderApp() {\n    const isIOs =\n      /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    const isAndroid = /Android/.test(navigator.userAgent) && !window.MSStream;\n    if (this.videoUpload) {\n      if (isIOs || isAndroid) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (this.audioUpload) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  _fileClick() {\n    const isFirefox =\n      /firefox/.test(navigator.userAgent.toLowerCase()) && !window.MSStream;\n    const rawChrome = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n    const chromeVersion = rawChrome ? parseInt(rawChrome[2], 10) : false;\n    const isSamsungBrowser = /SamsungBrowser/.test(navigator.userAgent);\n    const isIOs =\n      /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n    if (this._hasRecorderApp()) {\n      this._openFileInput();\n    } else {\n      if (\n        (isIOs && this.audioUpload) ||\n        isFirefox ||\n        (chromeVersion && !isSamsungBrowser)\n      ) {\n        this._openMediaRecorder();\n      } else {\n        this._openFileInput();\n      }\n    }\n  }\n\n  _openFileInput(aspect: string | undefined = undefined) {\n    if (aspect) {\n      this.videoAspect = aspect;\n    }\n    const elem = this.$$('#fileInput');\n    if (elem && document.createEvent) {\n      // sanity check\n      const evt = document.createEvent('MouseEvents');\n      evt.initEvent('click', true, false);\n      elem.dispatchEvent(evt);\n    }\n  }\n\n  _openMediaRecorder() {\n    window.appGlobals.activity('open', 'mediaRecorder');\n    window.appDialogs.getMediaRecorderAsync((dialog: any /*YpMediaRecorder*/) => {\n      dialog.open({\n        callbackFunction: this._dataFromMediaRecorder.bind(this),\n        videoRecording: this.videoUpload,\n        audioRecording: this.audioUpload,\n        uploadFileFunction: this._openFileInput.bind(this),\n        maxLength: this.uploadLimitSeconds || 600,\n      });\n    });\n  }\n\n  _dataFromMediaRecorder(file: YpUploadFileData) {\n    file.progress = 0;\n    file.error = false;\n    file.complete = false;\n    this.files.push(file);\n    this.uploadFile(file);\n  }\n\n  /**\n   * Called whenever the list of selected files changes\n   */\n  _fileChange(e: { target: { files: Array<YpUploadFileData> } }) {\n    const length = e.target.files.length;\n    for (let i = 0; i < length; i++) {\n      const file = e.target.files[i];\n      file.progress = 0;\n      file.error = false;\n      file.complete = false;\n      this.files.push(file);\n      this.uploadFile(file);\n    }\n  }\n\n  /**\n   * Cancels the file upload for a specific file\n   *\n   * @param {object} a file, an element of the files array\n   */\n  cancel(file: YpUploadFileData) {\n    if (file && file.xhr) {\n      file.xhr.abort();\n      this.files.splice(this.files.indexOf(file), 1);\n      this._showDropText();\n    }\n  }\n\n  /**\n   * Cancels the file upload\n   *\n   * @param {object}, an event object\n   */\n  _cancelUpload(e: { model: { __data__: { item: YpUploadFileData } } }) {\n    this.cancel(e.model.__data__.item);\n  }\n\n  /**\n   * Retries to upload the file\n   *\n   * @param {object}, an event object\n   */\n  _retryUpload(e: {\n    model: { item: YpUploadFileData; __data__: { item: any } };\n  }) {\n    e.model.item.error = false;\n    e.model.item.progress = 0;\n    // The async helps give visual feedback of a retry occurring, even though it's less efficient.\n    setTimeout(() => {\n      this.uploadFile(e.model.__data__.item);\n    }, 50);\n  }\n\n  /**\n   * Whether or not to display the drop text\n   */\n  _showDropText() {\n    this.shownDropText = !this.files.length && this.droppable;\n  }\n\n  async uploadFile(file: YpUploadFileData) {\n    if (this.videoUpload || this.audioUpload || this.attachmentUpload) {\n      this.indeterminateProgress = true;\n      this.currentFile = file;\n\n      let mediaUrl: string;\n      let ajaxBody = {};\n\n      if (this.videoUpload) {\n        window.appGlobals.activity('starting', 'videoUpload');\n        this.uploadStatus = this.t('uploadingVideo');\n        this.headers = { 'Content-Type': 'video/mp4' };\n\n        if (this.group) {\n          mediaUrl =\n            '/api/videos/' + this.group.id + '/createAndGetPreSignedUploadUrl';\n        } else {\n          mediaUrl = '/api/videos/createAndGetPreSignedUploadUrlLoggedIn';\n        }\n      } else if (this.audioUpload) {\n        window.appGlobals.activity('starting', 'audioUpload');\n        this.uploadStatus = this.t('uploadingAudio');\n        this.headers = { 'Content-Type': 'audio/mp4' };\n\n        if (this.group) {\n          mediaUrl =\n            '/api/audios/' + this.group.id + '/createAndGetPreSignedUploadUrl';\n        } else {\n          mediaUrl = '/api/audios/createAndGetPreSignedUploadUrlLoggedIn';\n        }\n      } else if (this.attachmentUpload) {\n        window.appGlobals.activity('starting', 'attachmentUpload');\n        this.uploadStatus = this.t('attachmentUpload');\n\n        if (this.group) {\n          ajaxBody = {\n            filename: file.name,\n            contentType: file.type,\n          };\n          mediaUrl =\n            '/api/groups/' + this.group.id + '/getPresignedAttachmentURL';\n        } else {\n          console.error('No group for attachment upload');\n          return;\n        }\n      }\n\n      const response = await window.serverApi.createPresignUrl(\n        mediaUrl!,\n        ajaxBody\n      );\n\n      this.target = response.presignedUrl;\n      if (this.videoUpload) this.currentVideoId = response.videoId;\n      else this.currentAudioId = response.audioId;\n      this.method = 'PUT';\n      this.indeterminateProgress = false;\n      this.reallyUploadFile(this.currentFile);\n    } else {\n      window.appGlobals.activity('starting', 'imageUpload');\n      this.uploadStatus = this.t('uploadingImage');\n      this.reallyUploadFile(file);\n    }\n  }\n\n  _checkTranscodingJob(jobId: string) {\n    setTimeout(async () => {\n      let mediaType, mediaId;\n      if (this.videoUpload) {\n        mediaType = 'videos';\n        mediaId = this.currentVideoId;\n      } else {\n        mediaType = 'audios';\n        mediaId = this.currentAudioId;\n      }\n\n      if (mediaId) {\n        const detail = await window.serverApi.getTranscodingJobStatus(\n          mediaType,\n          mediaId,\n          jobId\n        );\n\n        if (this.currentFile) {\n          const fileIndex = this.files.indexOf(\n            this.currentFile as YpUploadFileData\n          );\n          if (detail.status === 'Complete') {\n            this.files[fileIndex].complete = true;\n            this.uploadStatus = this.t('uploadCompleted');\n            this.transcodingComplete = true;\n            if (this.videoUpload) {\n              this.fire('success', {\n                detail: detail,\n                videoId: this.currentVideoId,\n              });\n              this.uploadStatus = this.t('selectCoverImage');\n            } else\n              this.fire('success', {\n                detail: detail,\n                audioId: this.currentAudioId,\n              });\n            this.fire('file-upload-complete');\n            window.appGlobals.activity('complete', 'mediaTranscoding');\n          } else if (detail.error) {\n            this.files[fileIndex].error = true;\n            this.files[fileIndex].complete = false;\n            this.files[fileIndex].progress = 100;\n            this.requestUpdate();\n            this.fire('error', { xhr: event });\n            this.fire('file-upload-complete');\n            window.appGlobals.activity('error', 'mediaTranscoding');\n          } else {\n            this._checkTranscodingJob(jobId);\n          }\n        } else {\n          console.error('Trying to process non file');\n        }\n      } else {\n        console.error('No media edit for transcoding check');\n      }\n    }, 1000);\n  }\n\n  _setVideoCover(event: CustomEvent) {\n    this.selectedVideoCoverIndex = event.detail;\n  }\n\n  _setDefaultImageAsVideoCover(event: CustomEvent) {\n    this.useMainPhotoForVideoCover = event.detail;\n  }\n\n  /**\n   * Really uploads a file\n   *\n   * @param {object} a file, an element of the files array\n   */\n  reallyUploadFile(file: YpUploadFileData) {\n    if (!file) {\n      return;\n    }\n\n    let aspect = this.videoAspect;\n\n    if (!aspect) {\n      if (window.innerHeight > window.innerWidth) {\n        aspect = 'portrait';\n      } else {\n        aspect = 'landscape';\n      }\n    }\n\n    this.fire('file-upload-starting');\n    this._showDropText();\n    const fileIndex = this.files.indexOf(file);\n\n    const xhr = (file.xhr = new XMLHttpRequest());\n\n    xhr.upload.onprogress = e => {\n      const done = e.loaded,\n        total = e.total;\n      this.files[fileIndex].progress = Math.floor((done / total) * 1000) / 10;\n    };\n\n    const url = this.target.replace('<name>', file.name);\n    xhr.open(this.method, url, true);\n    for (const key in this.headers) {\n      // eslint-disable-next-line no-prototype-builtins\n      if (this.headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, this.headers[key]);\n      }\n    }\n\n    xhr.onload = async () => {\n      if (xhr.status === 200) {\n        if (this.videoUpload && this.currentVideoId) {\n          this.indeterminateProgress = true;\n          this.uploadStatus = this.t('transcodingVideo');\n\n          let startType;\n          if (this.group) {\n            startType = 'startTranscoding';\n          } else {\n            startType = 'startTranscodingLoggedIn';\n          }\n\n          let options;\n\n          if (this.containerType === 'posts' && this.group) {\n            options = {\n              videoPostUploadLimitSec: this.group.configuration\n                .videoPostUploadLimitSec,\n              aspect: '',\n            };\n          } else if (this.containerType === 'points' && this.group) {\n            options = {\n              videoPointUploadLimitSec: this.group.configuration\n                .videoPointUploadLimitSec,\n              aspect: '',\n            };\n          } else {\n            options = {};\n          }\n\n          options.aspect = aspect;\n\n          const response = (await window.serverApi.startTranscoding(\n            'videos',\n            this.currentVideoId,\n            startType,\n            options\n          )) as StartTranscodingResponse;\n\n          this._checkTranscodingJob(response.transcodingJobId);\n\n          window.appGlobals.activity('complete', 'videoUpload');\n          window.appGlobals.activity('start', 'mediaTranscoding');\n        } else if (this.audioUpload && this.currentAudioId) {\n          this.indeterminateProgress = true;\n          this.uploadStatus = this.t('transcodingAudio');\n\n          let startType;\n          if (this.group) {\n            startType = 'startTranscoding';\n          } else {\n            startType = 'startTranscodingLoggedIn';\n          }\n\n          let options;\n          if (this.containerType === 'posts' && this.group) {\n            options = {\n              audioPostUploadLimitSec: this.group.configuration\n                .audioPostUploadLimitSec,\n            };\n          } else if (this.containerType === 'points' && this.group) {\n            options = {\n              audioPointUploadLimitSec: this.group.configuration\n                .audioPointUploadLimitSec,\n            };\n          } else {\n            options = {};\n          }\n\n          const response = (await window.serverApi.startTranscoding(\n            'audios',\n            this.currentAudioId,\n            startType,\n            options\n          )) as StartTranscodingResponse;\n\n          this._checkTranscodingJob(response.transcodingJobId);\n\n          window.appGlobals.activity('complete', 'audioUpload');\n          window.appGlobals.activity('start', 'mediaTranscoding');\n        } else if (this.attachmentUpload) {\n          this.uploadStatus = this.t('uploadCompleted');\n          this.fire('file-upload-complete');\n          this.files[fileIndex].complete = true;\n          this.fire('success', {xhr: xhr, filename: file.name });\n          window.appGlobals.activity('complete', 'attachmentUpload');\n        } else {\n          this.uploadStatus = this.t('uploadCompleted');\n          this.fire('file-upload-complete');\n          this.files[fileIndex].complete = true;\n          this.fire('success', { xhr: xhr, videoId: this.currentVideoId });\n          window.appGlobals.activity('complete', 'imageUpload');\n        }\n      } else {\n        this.fire('file-upload-complete');\n        this.files[fileIndex].error = true;\n        this.files[fileIndex].complete = false;\n        this.files[fileIndex].progress = 100;\n        this.requestUpdate();\n        this.fire('error', { xhr: xhr });\n        window.appGlobals.activity('error', 'mediaUpload');\n      }\n    };\n\n    if (this.videoUpload || this.audioUpload || this.attachmentUpload) {\n      xhr.send(file);\n    } else {\n      const formData = new FormData();\n      formData.append('file', file, file.name);\n      xhr.send(formData);\n    }\n  }\n}\n"]}